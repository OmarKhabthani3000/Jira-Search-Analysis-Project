### Eclipse Workspace Patch 1.0
#P hibernate-entitymanager
Index: src/java/org/hibernate/ejb/AbstractEntityManagerImpl.java
===================================================================
RCS file: /cvsroot/hibernate/HibernateExt/ejb/src/java/org/hibernate/ejb/AbstractEntityManagerImpl.java,v
retrieving revision 1.26
diff -u -r1.26 AbstractEntityManagerImpl.java
--- src/java/org/hibernate/ejb/AbstractEntityManagerImpl.java	9 Dec 2005 04:31:00 -0000	1.26
+++ src/java/org/hibernate/ejb/AbstractEntityManagerImpl.java	12 Jan 2006 01:03:05 -0000
@@ -8,12 +8,8 @@
 import java.io.ObjectInputStream;
 import java.io.ObjectOutputStream;
 import java.io.Serializable;
-import javax.persistence.EntityNotFoundException;
-import javax.persistence.EntityTransaction;
-import javax.persistence.FlushModeType;
-import javax.persistence.PersistenceContextType;
-import javax.persistence.Query;
-import javax.persistence.TransactionRequiredException;
+
+import javax.persistence.*;
 
 import org.hibernate.FlushMode;
 import org.hibernate.LockMode;
@@ -50,12 +46,16 @@
 
 	public Query createNativeQuery(String sqlString) {
 		//FIXME for scalar?
-		throw new RuntimeException( "NOT YET IMPLEMENTED" );
+	    //throw new RuntimeException( "NOT YET IMPLEMENTED" );
+        return new QueryImpl( getSession().createSQLQuery( sqlString ) );
 	}
 
 	public Query createNativeQuery(String sqlString, Class resultClass) {
 		SQLQuery q = getSession().createSQLQuery( sqlString );
-		q.addEntity( "alias1", resultClass.getName(), LockMode.READ );
+        //scalars will be autodeteced
+        if (resultClass.isAnnotationPresent(Entity.class)) {
+            q.addEntity( "alias1", resultClass.getName(), LockMode.READ );
+        }
 		return new QueryImpl( q );
 	}
 
