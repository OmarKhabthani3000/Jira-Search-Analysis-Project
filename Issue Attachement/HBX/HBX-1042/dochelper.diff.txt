Index: C:/workspaces/eDD/hibernate-tools/src/java/org/hibernate/tool/hbm2x/doc/DocHelper.java
===================================================================
--- C:/workspaces/eDD/hibernate-tools/src/java/org/hibernate/tool/hbm2x/doc/DocHelper.java	(revision 14364)
+++ C:/workspaces/eDD/hibernate-tools/src/java/org/hibernate/tool/hbm2x/doc/DocHelper.java	(working copy)
@@ -131,14 +131,25 @@
         }
 
         this.cfg = cfg;
-
-        dialect = cfg.buildSettings().getDialect(); // TODO: get it from somewhere "cached".
         
-        Settings settings = cfg.buildSettings();
+        String defaultCatalog = null;
+        String defaultSchema = null;      
 
-        String defaultCatalog = settings.getDefaultCatalogName();
-
-        String defaultSchema = settings.getDefaultSchemaName();      
+        try
+        {
+            Settings settings = cfg.buildSettings();
+            dialect = settings.getDialect();
+            
+            defaultCatalog = settings.getDefaultCatalogName();
+            defaultSchema = settings.getDefaultSchemaName();
+        }
+        catch (HibernateException e)
+        {
+            // buildSettings() may fail, in that case use defaults
+        	// and read the Dialect from the configuration
+        	Properties connectionProperties = cfg.getProperties();
+        	dialect = Dialect.getDialect(connectionProperties);
+        }
         
 
         if (defaultSchema == null) {