Index: tools/src/java/org/hibernate/tool/ant/Cfg2HbmGeneratorTask.java
===================================================================
RCS file: /cvsroot/hibernate/HibernateExt/tools/src/java/org/hibernate/tool/ant/Cfg2HbmGeneratorTask.java,v
retrieving revision 1.4
diff -u -r1.4 Cfg2HbmGeneratorTask.java
--- tools/src/java/org/hibernate/tool/ant/Cfg2HbmGeneratorTask.java	7 Jun 2005 11:09:38 -0000	1.4
+++ tools/src/java/org/hibernate/tool/ant/Cfg2HbmGeneratorTask.java	13 Sep 2005 06:43:30 -0000
@@ -4,19 +4,41 @@
  */
 package org.hibernate.tool.ant;
 
+import org.apache.tools.ant.BuildException;
 import org.hibernate.tool.hbm2x.Exporter;
 import org.hibernate.tool.hbm2x.HibernateMappingExporter;
 
 public class Cfg2HbmGeneratorTask extends GeneratorTask {
 
+    private String exporter = null;
+    
 	public Cfg2HbmGeneratorTask(HibernateToolTask parent) {
 		super(parent);
 	}
 
-	protected Exporter createExporter() {
-		return new HibernateMappingExporter();
-	}	
-	
+      /**
+       * @param exporter The exporter to set.
+       */
+      public void setExporter(String exporter) {
+          this.exporter = exporter;
+      }
+      
+      protected Exporter createExporter() {
+        if (exporter == null)
+            return new HibernateMappingExporter();
+
+        return createCustomExporter();
+    }
+
+    private Exporter createCustomExporter() {
+        try {
+            return (Exporter) Class.forName(exporter).newInstance();
+        } catch (Exception e) {
+            throw new BuildException("Couldn't instantiate custom exporter "
+                    + exporter + ". It must be added to the class path.", e);
+        }
+    }
+
 	public String getName() {
 		return "cfg2hbm (Generates a set of hbm.xml files)";
 	}
