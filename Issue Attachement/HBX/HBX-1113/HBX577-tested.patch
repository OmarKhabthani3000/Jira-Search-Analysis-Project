--- ./Escritorio/Ejb3TypeDeclaration.ftl	2009-02-20 12:42:01.338510800 -0600
+++ /cygdrive/c/workspace/hibernate-tools/pojo/Ejb3TypeDeclaration.ftl	2009-02-27 13:16:10.036129500 -0600
@@ -1,13 +1,64 @@
 <#if ejb3?if_exists>
 <#if pojo.isComponent()>
 @${pojo.importType("javax.persistence.Embeddable")}
 <#else>
 @${pojo.importType("javax.persistence.Entity")}
+<#switch clazz.class.simpleName> 
+  <#case "RootClass">
+
+    <#if clazz.hasSubclasses()>
+      <#list clazz.subclassIterator as zubclazz>
+        <#switch zubclazz.class.simpleName>
+        <#case "SingleTableSubclass">
+@${pojo.importType("javax.persistence.Inheritance")}(strategy=${pojo.importType("javax.persistence.InheritanceType")}.SINGLE_TABLE)
+      <#if clazz.discriminator.isSimpleValue()>
+         <#list clazz.discriminator.columnIterator as discriminatorColumn>
+@${pojo.importType("javax.persistence.DiscriminatorColumn")}(
+    name="${discriminatorColumn.name}"
+     )
+         </#list>  
+       </#if>
+       <#break>
+       <#case "UnionSubclass">       
+@${pojo.importType("javax.persistence.Inheritance")}(strategy = ${pojo.importType("javax.persistence.InheritanceType")}.TABLE_PER_CLASS)       
+       <#break>
+       <#case "JoinedSubclass">       
+@${pojo.importType("javax.persistence.Inheritance")}(strategy=${pojo.importType("javax.persistence.InheritanceType")}.JOINED)       
+         <#break>
+        </#switch>       
+        <#break>
+      </#list>
+    <#else>
+    </#if> 
+  <#break>
+  <#case "SingleTableSubclass">
+@${pojo.importType("javax.persistence.DiscriminatorValue")}("${clazz.discriminatorValue}")   
+  <#break>
+  <#case "UnionSubclass">
+  <#break>
+  <#case "JoinedSubclass"> 
+   <#if clazz.discriminator.isSimpleValue()>
+      <#list clazz.discriminator.columnIterator as joinColumn>
+@${pojo.importType("javax.persistence.PrimaryKeyJoinColumn")}(
+    name="${joinColumn.name}"
+)
+     </#list>     
+<#else>
+@${pojo.importType("javax.persistence.PrimaryKeyJoinColumns")}({
+      <#list clazz.discriminator.columnIterator as joinColumn>
+@${pojo.importType("javax.persistence.PrimaryKeyJoinColumn")}(
+    name="${joinColumn.name}"
+)<#if joinColumn_has_next>,</#if>
+     </#list>     
+})
+</#if> 
+  <#break>
+</#switch>  
 @${pojo.importType("javax.persistence.Table")}(name="${clazz.table.name}"
 <#if clazz.table.schema?exists>
     ,schema="${clazz.table.schema}"
 </#if><#if clazz.table.catalog?exists>
     ,catalog="${clazz.table.catalog}"
 </#if>
 <#assign uniqueConstraint=pojo.generateAnnTableUniqueConstraint()>
 <#if uniqueConstraint?has_content>
