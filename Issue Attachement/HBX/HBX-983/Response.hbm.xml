<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
	"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
	"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<!--  /* 
 * Copyright 2006 RAYNET s.r.o., All rights reserved. 
 * RAYNET s.r.o. PROPRIETARY/CONFIDENTIAL. Use is subject to license terms. 
 * www.raynet.cz 
 */  -->

<!-- this map is created to keep track of responsibilities of tutor with subject
               (and also cases,questions,lesson of this subject) lesson, cases,
               question.
         Response    : - IdResponse
                       - IdObject  ( IdSubject,Case,lesson)
                       - IdUser    (Idtutor)
                       - IdOfficer ( who assigned this response to tutor)  
                       - role      (senior, or junior)
                    
      @author Hai Nguyen 
 
  -->		

<hibernate-mapping package="cz.raynet.lais">
 <class name="Response" table="RESPONSE" lazy="true">
   <meta attribute="class-description">
   keep trach of responsibilities of tutor
   @author Hai Nguyen
 </meta>    
   
   <!-- common id -->
		<id name="id" column="RES_ID">
		 <generator class="native">
		 
		 </generator>
		</id>
   
    <property name="type" type="string"
              column="TYPE" not-null="true" >
    <meta attribute="field-description"> 
    type of this response : case , test or subject
    </meta>
    </property>     
    
    <property name="subLevel" type="int"
              column="SUBLEVEL" not-null="false">
    <meta attribute="field-description">
    if this response for subject, junior tutor can be assigned to level 1 or 2 
    of subject
    </meta>
    </property>           
                                       
    <property name="workDescription" type="String" 
              column="DESCRIPTION" not-null="true">
    <meta attribute="field-description"> DESCRIPTION FOR THE WORK
    </meta>          
    </property>
    
    <property name="role" type="string" 
              column="ROLE" not-null="true">
    <meta attribute="field-description">
    this role can be SENIOR or JUNIOR    
    </meta>
    </property>
   <!-- many RESPONSE to one SUBJECT (one SUBJECT can by more than 1 senior -->
       <many-to-one name="subject" 
                    column="SUBJECT_ID" 
                    class="Subject" not-null="false" />
   <!-- many RESPONSE to one Case (one CASE can by more than 1 senior -->
   <many-to-one name="case_instance" 
                    column="CASE_ID" 
                    class="Case" not-null="false" />                 
   <!-- many RESPONSE to one Lesson (one LESSON can by more than 1 senior -->
   <many-to-one name="lesson" 
                    column="LESSON_ID" 
                    class="Lesson" not-null="false" /> 
   
   
                    
    <!-- many RESPONSE to one user - tutor - subject -->                
    <many-to-one name="user" 
                    column="TUTOR_ID" 
                    class="User" not-null="true" />
   
   <one-to-one name="management" class="Management" property-ref="response"/>
              
 </class>

</hibernate-mapping>