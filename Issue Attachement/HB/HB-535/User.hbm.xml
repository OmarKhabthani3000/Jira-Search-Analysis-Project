<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping
        SYSTEM "http://hibernate.sourceforge.net/hibernate-mapping-2.0.dtd">

<hibernate-mapping>
    <class name="com.enterra.surv.po.User" table="t_user" lazy="true">

        <cache usage="read-write"/>

        <id name="id" column="f_user_id" type="int" unsaved-value="0" >
            <generator class="com.enterra.surv.system.IdGenerator"/>
        </id>

        <property name="name" type="java.lang.String" column="f_name" not-null="true" />

        <property name="mail" type="java.lang.String" column="f_mail" not-null="true" unique="true"/>

        <property name="password" type="java.lang.String" column="f_password" not-null="true" />

        <property name="state" type="com.enterra.surv.po.enum.UserState" column="f_state" not-null="true" />

        <property name="type" type="com.enterra.surv.po.enum.UserType" column="f_type" not-null="true" />

        <property name="language" type="com.enterra.surv.po.enum.Language" column="f_language" not-null="true"/>

        <property name="archived" type="boolean" column="f_archived"/>

        <bag name="surveys" cascade="all" inverse="true" table="t_survey" where="f_archived=0" lazy="true">
            <cache usage="read-write" />
            <key column="f_owner"/>
            <one-to-many class="com.enterra.surv.po.Survey"/>
        </bag>

    </class>
</hibernate-mapping>

