2003-12-19 10:16:03,953 DEBUG [net.sf.hibernate.impl.SessionImpl] Searching for collection in cache: [com.docent.lms.entities.reference.ReferenceDomain.ancestorSet_#1]
2003-12-19 10:16:03,953 DEBUG [net.sf.hibernate.cache.ReadWriteCache] Cache lookup: 1
2003-12-19 10:16:03,953 DEBUG [net.sf.hibernate.cache.ReadWriteCache] Cache miss: 1
2003-12-19 10:16:03,953 DEBUG [net.sf.hibernate.impl.SessionImpl] collection not cached
2003-12-19 10:16:03,953 DEBUG [net.sf.hibernate.collection.PersistentCollection] @3512.<init>
2003-12-19 10:16:03,953 DEBUG [net.sf.hibernate.collection.PersistentCollection] @3510.unsetSession
stack trace
	at net.sf.hibernate.collection.PersistentCollection.unsetSession(PersistentCollection.java:239)
	at net.sf.hibernate.impl.SessionImpl.addCollection(SessionImpl.java:3022)
	at net.sf.hibernate.impl.SessionImpl.addUninitializedCollection(SessionImpl.java:3039)
	at net.sf.hibernate.impl.SessionImpl.getCollection(SessionImpl.java:3748)
	at net.sf.hibernate.type.PersistentCollectionType.resolveIdentifier(PersistentCollectionType.java:181)
	at net.sf.hibernate.impl.SessionImpl.initializeEntity(SessionImpl.java:2130)
	at net.sf.hibernate.loader.Loader.doQuery(Loader.java:235)
	at net.sf.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:128)
	at net.sf.hibernate.loader.Loader.loadEntity(Loader.java:826)
	at net.sf.hibernate.loader.Loader.loadEntity(Loader.java:846)
	at net.sf.hibernate.loader.EntityLoader.load(EntityLoader.java:57)
	at net.sf.hibernate.loader.EntityLoader.load(EntityLoader.java:49)
	at net.sf.hibernate.persister.EntityPersister.load(EntityPersister.java:420)
	at net.sf.hibernate.impl.SessionImpl.doLoad(SessionImpl.java:2042)
	at net.sf.hibernate.impl.SessionImpl.doLoadByClass(SessionImpl.java:1916)
	at net.sf.hibernate.impl.SessionImpl.internalLoad(SessionImpl.java:1878)
	at net.sf.hibernate.type.ManyToOneType.resolveIdentifier(ManyToOneType.java:68)
	at net.sf.hibernate.type.EntityType.resolveIdentifier(EntityType.java:215)
	at net.sf.hibernate.type.ComponentType.resolveIdentifier(ComponentType.java:389)
	at net.sf.hibernate.type.ComponentType.nullSafeGet(ComponentType.java:145)
	at net.sf.hibernate.loader.Loader.getKeyFromResultSet(Loader.java:347)
	at net.sf.hibernate.loader.Loader.doQuery(Loader.java:198)
	at net.sf.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:128)
	at net.sf.hibernate.loader.Loader.loadCollection(Loader.java:905)
	at net.sf.hibernate.loader.Loader.loadCollection(Loader.java:880)
	at net.sf.hibernate.loader.OneToManyLoader.initialize(OneToManyLoader.java:80)
	at net.sf.hibernate.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:284)
	at net.sf.hibernate.impl.SessionImpl.initializeCollection(SessionImpl.java:3131)
	at net.sf.hibernate.collection.PersistentCollection.initialize(PersistentCollection.java:203)
	at net.sf.hibernate.collection.PersistentCollection.read(PersistentCollection.java:69)
	at net.sf.hibernate.collection.Map.get(Map.java:118)
	at com.docent.lms.entities.reference.ProxyMap.get(ProxyMap.java:47)
	at com.docent.lms.entities.reference.ProxyKeyedSet.get(ProxyKeyedSet.java:32)
	at com.docent.lms.entities.reference.GeneratedDomain.getName(GeneratedDomain.java:549)
	at com.docent.lms.entities.reference.ReferenceDomain.getName1(ReferenceDomain.java:1484)
	at com.docent.lms.entities.reference.ReferenceDomain.getName(ReferenceDomain.java:1476)
	at sun.reflect.GeneratedMethodAccessor109.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:324)
	at net.sf.hibernate.property.BasicPropertyAccessor$BasicGetter.get(BasicPropertyAccessor.java:96)
	at net.sf.hibernate.persister.AbstractEntityPersister.getPropertyValues(AbstractEntityPersister.java:243)
	at net.sf.hibernate.impl.AbstractVisitor.process(AbstractVisitor.java:93)
	at net.sf.hibernate.impl.SessionImpl.refresh(SessionImpl.java:2103)
	at net.sf.hibernate.impl.SessionImpl.refresh(SessionImpl.java:2071)
	at com.docent.lms.entities.reference.GeneratedDomain.refresh(GeneratedDomain.java:430)
	at com.docent.lms.entities.reference.ReferenceDomain.refresh1(ReferenceDomain.java:1459)
	at com.docent.lms.entities.reference.ReferenceDomain.refresh(ReferenceDomain.java:1451)
	at com.docent.lms.entities.reference.ReferenceDomain.postFlush(ReferenceDomain.java:294)
	at com.docent.lms.core.SessionInterceptor.postFlushAll(SessionInterceptor.java:859)
	at com.docent.lms.core.SessionInterceptor.postFlush(SessionInterceptor.java:763)
	at net.sf.hibernate.impl.SessionImpl.postFlush(SessionImpl.java:2719)
	at net.sf.hibernate.impl.SessionImpl.flush(SessionImpl.java:2186)
	at com.docent.lms.core.SessionInterceptor.doFlush(SessionInterceptor.java:888)
	at com.docent.lms.core.SessionInterceptor.flush(SessionInterceptor.java:311)
	at com.docent.lms.core.SessionInterceptor.postFlush(SessionInterceptor.java:777)
	at net.sf.hibernate.impl.SessionImpl.postFlush(SessionImpl.java:2719)
	at net.sf.hibernate.impl.SessionImpl.flush(SessionImpl.java:2186)
	at com.docent.lms.core.SessionInterceptor.doFlush(SessionInterceptor.java:888)
	at com.docent.lms.core.SessionInterceptor.flush(SessionInterceptor.java:311)
	at com.docent.lms.core.SessionInterceptor.flush(SessionInterceptor.java:337)
	at com.docent.lms.core.TransactionImpl.flush(TransactionImpl.java:101)
	at com.docent.lms.entities.reference.GeneratedDomain.save(GeneratedDomain.java:383)
	at com.docent.lms.web.pages.BaseEntityEditPage.doSave(BaseEntityEditPage.java:922)
	at com.docent.lms.web.pages.BaseEntityEditPage.doFormSubmit(BaseEntityEditPage.java:752)
	at com.docent.lms.web.pages.BaseEntityEditPage.doFormSubmit(BaseEntityEditPage.java:725)
	at com.docent.lms.web.pages.BaseEntityEditPage$1.actionTriggered(BaseEntityEditPage.java:688)
	at org.apache.tapestry.form.Form.renderComponent(Form.java:457)
	at org.apache.tapestry.AbstractComponent.render(AbstractComponent.java:880)
	at org.apache.tapestry.form.Form.rewind(Form.java:602)
	at org.apache.tapestry.engine.RequestCycle.rewindForm(RequestCycle.java:475)
	at org.apache.tapestry.form.Form.trigger(Form.java:616)
	at org.apache.tapestry.engine.DirectService.service(DirectService.java:210)
	at com.docent.lms.web.StatefulDirectService.service(StatefulDirectService.java:90)
	at org.apache.tapestry.engine.AbstractEngine.service(AbstractEngine.java:912)
	at org.apache.tapestry.ApplicationServlet.doService(ApplicationServlet.java:238)
	at org.apache.tapestry.ApplicationServlet.doPost(ApplicationServlet.java:367)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:760)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:247)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:193)
	at com.docent.lms.web.servlets.BlueTowerFilter.doFilter(BlueTowerFilter.java:64)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:213)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:193)
	at com.docent.lms.web.servlets.TransactionFilter.doFilter(TransactionFilter.java:64)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:213)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:260)
	at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)
	at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)
	at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
	at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)
	at org.apache.catalina.valves.CertificatesValve.invoke(CertificatesValve.java:246)
	at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)
	at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)
	at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
	at org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2396)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180)
	at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)
	at org.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java:170)
	at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:172)
	at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)
	at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:469)
	at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)
	at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)
	at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174)
	at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)
	at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)
	at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
	at org.apache.catalina.connector.http.HttpProcessor.process(HttpProcessor.java:1040)
	at org.apache.catalina.connector.http.HttpProcessor.run(HttpProcessor.java:1151)
	at java.lang.Thread.run(Thread.java:534)
2003-12-19 10:16:03,953 DEBUG [com.docent.lms.core.SessionInterceptor] hibernate.Interceptor.onLoad [com.docent.lms.entities.reference.ReferenceDomain#1]
2003-12-19 10:16:03,953 DEBUG [com.docent.lms.entities.reference.ReferenceDomain] @463.preLoad(Session, 1); state=loading; was loading
2003-12-19 10:16:03,953 DEBUG [com.docent.lms.entities.reference.ReferenceDomain] @463.setAncestorSet_

[snip...]

2003-12-19 10:16:04,437 WARN  [com.docent.lms.entities.reference.ReferenceDomain] @393.ancestorSet_@3510.session == null
2003-12-19 10:16:04,437 ERROR [net.sf.hibernate.LazyInitializationException] Failed to lazily initialize a collection - no Session
net.sf.hibernate.LazyInitializationException: Failed to lazily initialize a collection - no Session
	at net.sf.hibernate.collection.PersistentCollection.initialize(PersistentCollection.java:213)
	at net.sf.hibernate.collection.PersistentCollection.read(PersistentCollection.java:69)
	at net.sf.hibernate.collection.Set.iterator(Set.java:131)
	at com.docent.lms.entities.reference.ProxyCollection.iterator(ProxyCollection.java:41)
	at com.docent.lms.entities.reference.ReferenceDomain.getParent(ReferenceDomain.java:121)
	at com.docent.lms.entities.reference.ReferenceDomain.getParentForValidation(ReferenceDomain.java:798)
	at com.docent.lms.entities.reference.ReferenceDomain.validateUniqueName(ReferenceDomain.java:690)
	at com.docent.lms.entities.reference.ReferenceDomain.preFlushValidate(ReferenceDomain.java:654)
	at com.docent.lms.entities.reference.GeneratedDomain.validate(GeneratedDomain.java:334)
	at com.docent.lms.entities.reference.EntityUtility.validateAndThrow(EntityUtility.java:414)
	at com.docent.lms.core.SessionInterceptor.validateDirtyObjects(SessionInterceptor.java:1042)
	at com.docent.lms.core.SessionInterceptor.preCommit(SessionInterceptor.java:466)
	at com.docent.lms.core.TransactionImpl.commit(TransactionImpl.java:127)
	at com.docent.lms.web.pages.BaseEntityEditPage.doSave(BaseEntityEditPage.java:933)
	at com.docent.lms.web.pages.BaseEntityEditPage.doFormSubmit(BaseEntityEditPage.java:752)
	at com.docent.lms.web.pages.BaseEntityEditPage.doFormSubmit(BaseEntityEditPage.java:725)
	at com.docent.lms.web.pages.BaseEntityEditPage$1.actionTriggered(BaseEntityEditPage.java:688)
	at org.apache.tapestry.form.Form.renderComponent(Form.java:457)
	at org.apache.tapestry.AbstractComponent.render(AbstractComponent.java:880)
	at org.apache.tapestry.form.Form.rewind(Form.java:602)
	at org.apache.tapestry.engine.RequestCycle.rewindForm(RequestCycle.java:475)
	at org.apache.tapestry.form.Form.trigger(Form.java:616)
	at org.apache.tapestry.engine.DirectService.service(DirectService.java:210)
	at com.docent.lms.web.StatefulDirectService.service(StatefulDirectService.java:90)
	at org.apache.tapestry.engine.AbstractEngine.service(AbstractEngine.java:912)
	at org.apache.tapestry.ApplicationServlet.doService(ApplicationServlet.java:238)
	at org.apache.tapestry.ApplicationServlet.doPost(ApplicationServlet.java:367)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:760)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:247)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:193)
	at com.docent.lms.web.servlets.BlueTowerFilter.doFilter(BlueTowerFilter.java:64)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:213)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:193)
	at com.docent.lms.web.servlets.TransactionFilter.doFilter(TransactionFilter.java:64)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:213)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:260)
	at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)
	at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)
	at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
	at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)
	at org.apache.catalina.valves.CertificatesValve.invoke(CertificatesValve.java:246)
	at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)
	at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)
	at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
	at org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2396)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180)
	at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)
	at org.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java:170)
	at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:172)
	at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)
	at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:469)
	at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)
	at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)
	at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174)
	at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)
	at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)
	at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
	at org.apache.catalina.connector.http.HttpProcessor.process(HttpProcessor.java:1040)
	at org.apache.catalina.connector.http.HttpProcessor.run(HttpProcessor.java:1151)
	at java.lang.Thread.run(Thread.java:534)
