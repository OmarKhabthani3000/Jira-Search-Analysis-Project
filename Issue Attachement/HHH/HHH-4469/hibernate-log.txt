2009-10-01 13:27:29,547 DEBUG [org.springframework.test.annotation.ProfileValueUtils] - Retrieved ProfileValueSource type [class org.springframework.test.annotation.SystemProfileValueSource] for class [com.brainresource.jpa.ProductTest]
2009-10-01 13:27:29,562 DEBUG [org.springframework.orm.jpa.JpaTransactionManager] - Creating new transaction with name [com.brainresource.jpa.product.ProductRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2009-10-01 13:27:29,562 DEBUG [org.springframework.orm.jpa.JpaTransactionManager] - Opened new EntityManager [org.hibernate.ejb.EntityManagerImpl@ffa6eb] for JPA transaction
2009-10-01 13:27:29,594 DEBUG [org.hibernate.impl.SessionImpl] - opened session at timestamp: 12543676495
2009-10-01 13:27:29,594 DEBUG [org.hibernate.transaction.JDBCTransaction] - begin
2009-10-01 13:27:29,594 DEBUG [org.hibernate.jdbc.ConnectionManager] - opening JDBC connection
2009-10-01 13:27:29,594 DEBUG [org.hibernate.transaction.JDBCTransaction] - current autocommit status: true
2009-10-01 13:27:29,594 DEBUG [org.hibernate.transaction.JDBCTransaction] - disabling autocommit
2009-10-01 13:27:29,609 DEBUG [org.springframework.orm.jpa.JpaTransactionManager] - Exposing JPA transaction as JDBC transaction [SimpleConnectionHandle: jdbc:mysql://localhost:3306/playpen, UserName=playpen@localhost, MySQL-AB JDBC Driver]
2009-10-01 13:27:29,609 DEBUG [org.hibernate.impl.SessionImpl] - opened session at timestamp: 12543676496
2009-10-01 13:27:29,609 DEBUG [org.hibernate.transaction.JDBCTransaction] - begin
2009-10-01 13:27:29,609 DEBUG [org.hibernate.jdbc.ConnectionManager] - opening JDBC connection
2009-10-01 13:27:29,625 DEBUG [org.hibernate.transaction.JDBCTransaction] - current autocommit status: true
2009-10-01 13:27:29,625 DEBUG [org.hibernate.transaction.JDBCTransaction] - disabling autocommit
2009-10-01 13:27:29,625 DEBUG [org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler] - Starting resource local transaction on application-managed EntityManager [org.hibernate.ejb.EntityManagerImpl@aefcbb]
2009-10-01 13:27:29,625 DEBUG [org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler] - Joined local transaction
2009-10-01 13:27:29,640 DEBUG [org.hibernate.event.def.AbstractSaveEventListener] - executing identity-insert immediately
2009-10-01 13:27:29,640 DEBUG [org.hibernate.jdbc.AbstractBatcher] - about to open PreparedStatement (open PreparedStatements: 0, globally: 0)
2009-10-01 13:27:29,640 DEBUG [org.hibernate.SQL] - insert into product (prod_desc, prod_name, regular_price) values (?, ?, ?)
Hibernate: insert into product (prod_desc, prod_name, regular_price) values (?, ?, ?)
2009-10-01 13:27:29,656 DEBUG [org.hibernate.id.IdentifierGeneratorFactory] - Natively generated identity: 21
2009-10-01 13:27:29,656 DEBUG [org.hibernate.jdbc.AbstractBatcher] - about to close PreparedStatement (open PreparedStatements: 1, globally: 1)
2009-10-01 13:27:29,656 DEBUG [org.hibernate.event.def.AbstractSaveEventListener] - generated identifier: component[item,product]{product=com.brainresource.jpa.product.Product#21, item=com.brainresource.jpa.product.Item#null}, using strategy: org.hibernate.id.Assigned
2009-10-01 13:27:29,656 DEBUG [org.springframework.orm.jpa.JpaTransactionManager] - Initiating transaction rollback
2009-10-01 13:27:29,656 DEBUG [org.springframework.orm.jpa.JpaTransactionManager] - Rolling back JPA transaction on EntityManager [org.hibernate.ejb.EntityManagerImpl@ffa6eb]
2009-10-01 13:27:29,656 DEBUG [org.hibernate.transaction.JDBCTransaction] - rollback
2009-10-01 13:27:29,656 DEBUG [org.hibernate.transaction.JDBCTransaction] - re-enabling autocommit
2009-10-01 13:27:29,656 DEBUG [org.hibernate.transaction.JDBCTransaction] - rolled back JDBC Connection
2009-10-01 13:27:29,656 DEBUG [org.hibernate.jdbc.ConnectionManager] - aggressively releasing JDBC connection
2009-10-01 13:27:29,656 DEBUG [org.hibernate.jdbc.ConnectionManager] - releasing JDBC connection [ (open PreparedStatements: 0, globally: 0) (open ResultSets: 0, globally: 0)]
2009-10-01 13:27:29,656 DEBUG [org.hibernate.transaction.JDBCTransaction] - rollback
2009-10-01 13:27:29,672 DEBUG [org.hibernate.transaction.JDBCTransaction] - re-enabling autocommit
2009-10-01 13:27:29,672 DEBUG [org.hibernate.transaction.JDBCTransaction] - rolled back JDBC Connection
2009-10-01 13:27:29,672 DEBUG [org.hibernate.jdbc.ConnectionManager] - aggressively releasing JDBC connection
2009-10-01 13:27:29,672 DEBUG [org.hibernate.jdbc.ConnectionManager] - releasing JDBC connection [ (open PreparedStatements: 0, globally: 0) (open ResultSets: 0, globally: 0)]
2009-10-01 13:27:29,672 DEBUG [org.springframework.orm.jpa.JpaTransactionManager] - Closing JPA EntityManager [org.hibernate.ejb.EntityManagerImpl@ffa6eb] after transaction
2009-10-01 13:27:29,672 DEBUG [org.springframework.orm.jpa.EntityManagerFactoryUtils] - Closing JPA EntityManager
2009-10-01 13:27:29,672 DEBUG [org.springframework.test.context.junit4.SpringMethodRoadie] - Test method [public void com.brainresource.jpa.ProductTest.createNewProduct()] threw exception: java.lang.NullPointerException
2009-10-01 13:27:29,672 DEBUG [org.springframework.test.context.support.DirtiesContextTestExecutionListener] - After test method: context [[TestContext@143c8b3 testClass = ProductTest, locations = array<String>['classpath:test/application*.xml'], testInstance = com.brainresource.jpa.ProductTest@12d7a10, testMethod = createNewProduct@ProductTest, testException = java.lang.NullPointerException]], dirtiesContext [false].

------------- ---------------- ---------------
Testcase: createNewProduct(com.brainresource.jpa.ProductTest):        Caused an ERROR
null
java.lang.NullPointerException
        at org.hibernate.type.AbstractType.getHashCode(AbstractType.java:136)
        at org.hibernate.type.AbstractType.getHashCode(AbstractType.java:144)
        at org.hibernate.type.EntityType.getHashCode(EntityType.java:312)
        at org.hibernate.type.ComponentType.getHashCode(ComponentType.java:212)
        at org.hibernate.engine.EntityKey.generateHashCode(EntityKey.java:126)
        at org.hibernate.engine.EntityKey.<init>(EntityKey.java:70)
        at org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:184)
        at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:144)
        at org.hibernate.ejb.event.EJB3PersistEventListener.saveWithGeneratedId(EJB3PersistEventListener.java:49)
        at org.hibernate.event.def.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:154)
        at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:110)
        at org.hibernate.impl.SessionImpl.firePersist(SessionImpl.java:637)
        at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:629)
        at org.hibernate.engine.EJB3CascadingAction$1.cascade(EJB3CascadingAction.java:30)
        at org.hibernate.engine.Cascade.cascadeToOne(Cascade.java:292)
        at org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:240)
        at org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:193)
        at org.hibernate.engine.Cascade.cascadeCollectionElements(Cascade.java:320)
        at org.hibernate.engine.Cascade.cascadeCollection(Cascade.java:266)
        at org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:243)
        at org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:193)
        at org.hibernate.engine.Cascade.cascade(Cascade.java:154)
        at org.hibernate.event.def.AbstractSaveEventListener.cascadeAfterSave(AbstractSaveEventListener.java:479)
        at org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:357)
        at org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:204)
        at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:130)
        at org.hibernate.ejb.event.EJB3PersistEventListener.saveWithGeneratedId(EJB3PersistEventListener.java:49)
        at org.hibernate.event.def.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:154)
        at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:110)
        at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:61)
        at org.hibernate.impl.SessionImpl.firePersist(SessionImpl.java:646)
        at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:620)
        at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:624)
        at org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:213)
        at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:358)
        at $Proxy34.persist(Unknown Source)
        at com.brainresource.jpa.product.ProductRepositoryImpl.save(ProductRepositoryImpl.java:27)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
        at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:89)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
        at $Proxy35.save(Unknown Source)
        at com.brainresource.jpa.ProductTest.createNewProduct(ProductTest.java:117)
        at org.springframework.test.context.junit4.SpringTestMethod.invoke(SpringTestMethod.java:163)
        at org.springframework.test.context.junit4.SpringMethodRoadie.runTestMethod(SpringMethodRoadie.java:233)
        at org.springframework.test.context.junit4.SpringMethodRoadie$RunBeforesThenTestThenAfters.run(SpringMethodRoadie.java:333)
        at org.springframework.test.context.junit4.SpringMethodRoadie.runWithRepetitions(SpringMethodRoadie.java:217)
        at org.springframework.test.context.junit4.SpringMethodRoadie.runTest(SpringMethodRoadie.java:197)
        at org.springframework.test.context.junit4.SpringMethodRoadie.run(SpringMethodRoadie.java:143)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.invokeTestMethod(SpringJUnit4ClassRunner.java:142)


2009-10-01 13:27:30,062 INFO [org.springframework.context.support.GenericApplicationContext] - Closing org.springframework.context.support.GenericApplicationContext@11ddcde: display name [org.springframework.context.support.GenericApplicationContext@11ddcde]; startup date [Thu Oct 01 13:27:27 EST 2009]; root of context hierarchy
2009-10-01 13:27:30,062 INFO [org.springframework.beans.factory.support.DefaultListableBeanFactory] - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@e2cb55: defining beans [integDataSource,org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor#0,entityManagerFactory,transactionManager,managerTxAdvice,org.springframework.aop.config.internalAutoProxyCreator,japRepo,zabaddaRepo,operator,product,org.springframework.aop.support.DefaultBeanFactoryPointcutAdvisor#0,org.springframework.aop.support.DefaultBeanFactoryPointcutAdvisor#1,org.springframework.aop.support.DefaultBeanFactoryPointcutAdvisor#2,org.springframework.aop.support.DefaultBeanFactoryPointcutAdvisor#3,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,productRepository,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor]; root of factory hierarchy
2009-10-01 13:27:30,094 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] - Retrieved dependent beans for bean 'productRepository': [com.brainresource.jpa.ProductTest]
2009-10-01 13:27:30,094 DEBUG [org.springframework.orm.jpa.EntityManagerFactoryUtils] - Closing JPA EntityManager
2009-10-01 13:27:30,094 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] - Retrieved dependent beans for bean '(inner bean)': [managerTxAdvice]
2009-10-01 13:27:30,094 DEBUG [org.springframework.beans.factory.support.DisposableBeanAdapter] - Invoking destroy() on bean with name 'entityManagerFactory'
2009-10-01 13:27:30,109 INFO [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean] - Closing JPA EntityManagerFactory for persistence unit 'my-unit'
2009-10-01 13:27:30,109 INFO [org.hibernate.impl.SessionFactoryImpl] - closing
2009-10-01 13:27:30,109 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] - Retrieved dependent beans for bean 'org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter#b9b538': [entityManagerFactory]
Test com.brainresource.jpa.ProductTest FAILED
C:\Projects\opensource\SpringExamples\SpringHibernate\nbproject\build-impl.xml:818: Some tests failed; see details above.