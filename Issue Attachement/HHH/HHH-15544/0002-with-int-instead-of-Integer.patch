From e4145434b01241154d2df0aa5cbc952dff4abb3f Mon Sep 17 00:00:00 2001
From: Antoine Reilles <qaw@3ds.com>
Date: Mon, 26 Sep 2022 11:10:04 +0200
Subject: [PATCH 2/2] with int instead of Integer

---
 .../src/test/java/org/hibernate/bugs/JPAUnitTestCase.java  | 1 +
 .../src/test/java/org/hibernate/test/Department.java       | 5 +++++
 .../src/test/java/org/hibernate/test/Employee.java         | 7 ++++++-
 orm/hibernate-orm-5/src/test/resources/log4j.properties    | 7 ++++---
 4 files changed, 16 insertions(+), 4 deletions(-)

diff --git a/orm/hibernate-orm-5/src/test/java/org/hibernate/bugs/JPAUnitTestCase.java b/orm/hibernate-orm-5/src/test/java/org/hibernate/bugs/JPAUnitTestCase.java
index cc3ddb1..6896f7f 100644
--- a/orm/hibernate-orm-5/src/test/java/org/hibernate/bugs/JPAUnitTestCase.java
+++ b/orm/hibernate-orm-5/src/test/java/org/hibernate/bugs/JPAUnitTestCase.java
@@ -55,6 +55,7 @@ public class JPAUnitTestCase {
 			dept.addEmployee(emp1);
 			entityManager.merge(dept);
 			entityManager.getTransaction().commit();
+			logger.info("saved {}", dept);
 		}
 		{
 			entityManager.getTransaction().begin();
diff --git a/orm/hibernate-orm-5/src/test/java/org/hibernate/test/Department.java b/orm/hibernate-orm-5/src/test/java/org/hibernate/test/Department.java
index dcf72dd..e85eca5 100644
--- a/orm/hibernate-orm-5/src/test/java/org/hibernate/test/Department.java
+++ b/orm/hibernate-orm-5/src/test/java/org/hibernate/test/Department.java
@@ -43,4 +43,9 @@ public class Department {
         this.departmentId = departmentId;
     }
 
+    @Override
+    public String toString() {
+        return "Department [departmentId=" + departmentId + ", employees=" + employees + "]";
+    }
+
 }
diff --git a/orm/hibernate-orm-5/src/test/java/org/hibernate/test/Employee.java b/orm/hibernate-orm-5/src/test/java/org/hibernate/test/Employee.java
index e24ecab..d18731e 100644
--- a/orm/hibernate-orm-5/src/test/java/org/hibernate/test/Employee.java
+++ b/orm/hibernate-orm-5/src/test/java/org/hibernate/test/Employee.java
@@ -19,7 +19,7 @@ public class Employee {
     private String name;
 
     @Column
-    private Integer rank;
+    private int rank;
 
     @ManyToOne(optional = false, fetch = FetchType.LAZY)
     @JoinColumn(name = "dept_id", nullable = false, insertable = true, updatable = false)
@@ -57,4 +57,9 @@ public class Employee {
         this.employeeId = employeeId;
     }
 
+    @Override
+    public String toString() {
+        return "Employee [employeeId=" + employeeId + ", name=" + name + ", rank=" + rank + "]";
+    }
+
 }
diff --git a/orm/hibernate-orm-5/src/test/resources/log4j.properties b/orm/hibernate-orm-5/src/test/resources/log4j.properties
index 666c671..1cf0542 100644
--- a/orm/hibernate-orm-5/src/test/resources/log4j.properties
+++ b/orm/hibernate-orm-5/src/test/resources/log4j.properties
@@ -1,6 +1,6 @@
 # Root logger option
-log4j.rootLogger=DEBUG, stdout
- 
+log4j.rootLogger=TRACE, stdout
+
 # Direct log messages to stdout
 log4j.appender.stdout=org.apache.log4j.ConsoleAppender
 log4j.appender.stdout.Target=System.out
@@ -8,4 +8,5 @@ log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
 log4j.appender.stdout.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n
 
 
-log4j.logger.org.hibernate.bugs.ORMUnitTestCase=trace
\ No newline at end of file
+log4j.logger.org.hibernate.bugs.ORMUnitTestCase=trace
+log4j.logger.org.hibernate.SQL=debug
\ No newline at end of file
-- 
2.37.3.windows.1

