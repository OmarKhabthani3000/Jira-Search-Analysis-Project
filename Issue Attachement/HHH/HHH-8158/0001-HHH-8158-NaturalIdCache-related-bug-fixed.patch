From e0ed53266f3bfb4e44041f06663535ab6b304eee Mon Sep 17 00:00:00 2001
From: Andrey Anisimov <anisimov.new@gmail.com>
Date: Mon, 8 Apr 2013 23:21:16 +0700
Subject: [PATCH] HHH-8158 - NaturalIdCache-related bug fixed.

---
 .../org/hibernate/action/internal/AbstractEntityInsertAction.java    |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/hibernate-core/src/main/java/org/hibernate/action/internal/AbstractEntityInsertAction.java b/hibernate-core/src/main/java/org/hibernate/action/internal/AbstractEntityInsertAction.java
index 612ffd5..9ccd483 100644
--- a/hibernate-core/src/main/java/org/hibernate/action/internal/AbstractEntityInsertAction.java
+++ b/hibernate-core/src/main/java/org/hibernate/action/internal/AbstractEntityInsertAction.java
@@ -209,7 +209,7 @@ public abstract class AbstractEntityInsertAction extends EntityAction {
 		// after save, we need to manage the shared cache entries
 		getSession().getPersistenceContext().getNaturalIdHelper().manageSharedNaturalIdCrossReference(
 				getPersister(),
-				getId(),
+				generatedId,
 				state,
 				null,
 				CachedNaturalIdValueSource.INSERT
-- 
1.7.10.4

