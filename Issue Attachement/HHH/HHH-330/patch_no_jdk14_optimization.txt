--- hibernate-3.0/src/org/hibernate/criterion/SQLCriterion.java	Thu Mar 31 23:44:28 2005
+++ hibernate-3.0/src/org/hibernate/criterion/SQLCriterion.java.patch	Wed Apr 13 10:59:03 2005
@@ -22,7 +22,22 @@
 		Criteria criteria,
 		CriteriaQuery criteriaQuery)
 	throws HibernateException {
-		return StringHelper.replace( sql, "{alias}", criteriaQuery.getSQLAlias(criteria) );
+		String replace = StringHelper.replace( sql, "{alias}", criteriaQuery.getSQLAlias(criteria) );
+		
+		int begin = replace.indexOf('{');
+		while(begin != -1) {
+			int end = replace.indexOf('}', begin);
+			if(end != -1) {
+				String match = replace.substring(begin + 1, end);
+				replace = replace.substring(0, begin) +
+						criteriaQuery.getColumn(criteria, match) +
+						replace.substring(end + 1, replace.length());
+				begin = replace.indexOf('{', begin + match.length() + 1);
+			} else
+				begin = -1;
+		}
+		
+		return replace;
 	}
 
 	public TypedValue[] getTypedValues(Criteria criteria, CriteriaQuery criteriaQuery)
