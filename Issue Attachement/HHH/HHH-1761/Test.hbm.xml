<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>

    <class name="ObjectA" table="OBJECT">
        <id name="id"
            column="ID"
            access="field"/>

        <map name="properties"
            table="PROPERTIES"
            lazy="false"
            inverse="true"
            cascade="all,delete-orphan"
            fetch="join"
            access="field">

            <key column="OBJECT"/>
            <map-key column="NAME" type="string"/>
            <element column="VALUE" type="string"/>
        </map>
    </class>

    <class name="ObjectB" table="OBJECT">
        <id name="id"
            column="ID"
            access="field"/>

        <map name="properties"
            table="PROPERTIES"
            lazy="false"
            inverse="true"
            cascade="all,delete-orphan"
            fetch="join"
            access="field">

            <key column="OBJECT"/>
            <map-key column="NAME" type="string"/>
            <one-to-many class="Property"/>
        </map>
    </class>

    <class name="Property" table="PROPERTIES">
        <composite-id
            name="id"
            class="Property$Id"
            access="field">
    
            <key-property
                name="object"
                type="integer"
                column="OBJECT"
                access="field"
            />
            <key-property 
                name="name" 
                type="string"
                column="NAME" 
                access="field"
            />
        </composite-id>

        <property
            name="value"
            type="string"
            column="VALUE"
            access="field"
        />
    </class>

</hibernate-mapping>
