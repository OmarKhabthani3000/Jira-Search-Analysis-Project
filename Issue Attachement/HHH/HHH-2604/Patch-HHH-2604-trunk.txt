Index: src/main/java/org/hibernate/engine/transaction/Isolater.java
===================================================================
--- src/main/java/org/hibernate/engine/transaction/Isolater.java	(revision 14845)
+++ src/main/java/org/hibernate/engine/transaction/Isolater.java	(working copy)
@@ -215,7 +215,7 @@
 				}
 			}
 			finally {
-				if ( transacted && wasAutoCommit ) {
+				if ( transacted && wasAutoCommit && connection != null) {
 					try {
 						connection.setAutoCommit( true );
 					}
