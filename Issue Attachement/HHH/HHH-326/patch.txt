--- hibernate-3.0/SQLCriterion.java	Thu Mar 31 23:44:28 2005
+++ hibernate-3.0/patch/SQLCriterion.java	Fri Apr 08 16:11:14 2005
@@ -2,6 +2,9 @@
 package org.hibernate.criterion;
 
 
+import java.util.regex.Matcher;
+import java.util.regex.Pattern;
+
 import org.hibernate.Criteria;
 import org.hibernate.EntityMode;
 import org.hibernate.HibernateException;
@@ -22,7 +25,19 @@
 		Criteria criteria,
 		CriteriaQuery criteriaQuery)
 	throws HibernateException {
-		return StringHelper.replace( sql, "{alias}", criteriaQuery.getSQLAlias(criteria) );
+		String replace = StringHelper.replace( sql, "{alias}", criteriaQuery.getSQLAlias(criteria) );
+		
+		Pattern pattern = Pattern.compile("\\{.*}");
+		Matcher matcher = pattern.matcher(replace);
+		StringBuffer sb = new StringBuffer();
+		while(matcher.find()) {
+			String group = matcher.group();
+			group = group.substring(1, group.length() - 1);
+			matcher.appendReplacement(sb,criteriaQuery.getColumn(criteria, group));
+		}
+		matcher.appendTail(sb);
+		
+		return sb.toString();
 	}
 
 	public TypedValue[] getTypedValues(Criteria criteria, CriteriaQuery criteriaQuery)
