hibernate.hbm2ddl.auto = update

package org.hibernate.tool.hbm2ddl;
...........................

public class DatabaseMetadata {
	
.............................


	public boolean isTable(Object key) throws HibernateException {
		if(key instanceof String) {
			if ( getTableMetadata( (String) key, null, null ) != null ) {
				return true;
			} else {
				String[] strings = StringHelper.split(".", (String) key);
				if(strings.length==3) {
					return getTableMetadata(strings[2], strings[1], strings[2]) != null;
				} else if (strings.length==2) {
					return getTableMetadata(strings[2], strings[1], null) != null;
				}
			}
		}
		return false;
	}
	
	public String toString() {
		return "DatabaseMetadata" + tables.keySet().toString() + sequences.toString();
	}
}




11:13:08,328 ERROR SchemaUpdate:167 - could not complete schema update
java.lang.ArrayIndexOutOfBoundsException: 2
	at org.hibernate.tool.hbm2ddl.DatabaseMetadata.isTable(DatabaseMetadata.java:147)
	at org.hibernate.cfg.Configuration.generateSchemaUpdateScript(Configuration.java:935)
	at org.hibernate.tool.hbm2ddl.SchemaUpdate.execute(SchemaUpdate.java:144)
	at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:295)
	at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1176)
	at com.db4o.replication.hibernate.MetaDataTablesCreator.createTables(MetaDataTablesCreator.java:60)
	at com.db4o.replication.hibernate.HibernateReplicationProviderImpl.<init>(HibernateReplicationProviderImpl.java:155)
	at com.db4o.replication.hibernate.HibernateReplicationProviderImpl.<init>(HibernateReplicationProviderImpl.java:137)
	at com.db4o.replication.Replication.wrap(Replication.java:104)
	at com.db4o.replication.Replication.begin(Replication.java:46)
	at com.db4o.replication.Replication.begin(Replication.java:57)
	at objectstore.ext.cache.CacheServer.main(CacheServer.java:103)
