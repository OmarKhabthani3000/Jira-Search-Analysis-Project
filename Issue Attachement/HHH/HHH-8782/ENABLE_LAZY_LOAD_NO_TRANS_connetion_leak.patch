70d69
<     private transient boolean isSessionOwnedByMe = false;
212d210
<                 this.isSessionOwnedByMe = true;
223d220
<                 this.isSessionOwnedByMe = true;
234d230
<                 this.isSessionOwnedByMe = true;
278d273
<                 this.isSessionOwnedByMe = false;
600,605c595,597
< 		if ( currentSession == this.session ) {        
<             //overwise created temporary session by this object will by forgotend and leaked
<             if (! this.isSessionOwnedByMe) {
<                 this.session = null;
<             }
<             return true;            
---
> 		if ( currentSession == this.session ) {
> 			this.session = null;
> 			return true;
651,657c643,646
<             else if (this.isSessionOwnedByMe) {
<                 throw new HibernateException(
<                         "Illegal attempt to associate a collection having opened temporary session with another open session");
<             } else {
<                 this.session = session;
<                 return true;
<             }   
---
> 			else {
> 				this.session = session;
> 				return true;
> 			}
