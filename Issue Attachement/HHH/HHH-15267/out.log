-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running org.redisson.hibernate.CollectionTest
Hibernate: drop table if exists "CollectionTest$A" cascade 
Hibernate: drop table if exists "CollectionTest$B" cascade 
Hibernate: drop table if exists a_b cascade 
Hibernate: create table "CollectionTest$A" (id bigint not null, uniqueField varchar(255), primary key (id))
Hibernate: create table "CollectionTest$B" (id bigint not null, primary key (id))
Hibernate: create table a_b (unique_field varchar(255) not null, b_id bigint not null)
Hibernate: alter table if exists "CollectionTest$A" add constraint UK_9ueu4o2655mvd2yoygqb672lj unique (uniqueField)
Hibernate: alter table if exists a_b add constraint FKadpb1k6s8e3c36u7fd1eucape foreign key (b_id) references "CollectionTest$B"
Hibernate: insert into "CollectionTest$B" (id) values (?)
Hibernate: insert into "CollectionTest$A" (uniqueField, id) values (?, ?)
Hibernate: insert into a_b (unique_field, b_id) values (?, ?)
here1
Hibernate: select b1_0.unique_field,b1_1.id from a_b b1_0 join "CollectionTest$B" b1_1 on b1_1.id=b1_0.b_id where b1_0.unique_field=?
Hibernate: drop table if exists "CollectionTest$A" cascade 
Hibernate: drop table if exists "CollectionTest$B" cascade 
Hibernate: drop table if exists a_b cascade 
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.696 sec
Running org.redisson.hibernate.ReadWriteTest
Tests run: 5, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 2.01 sec <<< FAILURE!
testQuery(org.redisson.hibernate.ReadWriteTest)  Time elapsed: 0.151 sec  <<< ERROR!
jakarta.persistence.PersistenceException: Converting `org.hibernate.cache.CacheException` to JPA `PersistenceException` : java.lang.IllegalArgumentException: java.io.NotSerializableException: org.hibernate.query.internal.QueryParameterBindingsImpl$ParameterBindingsMementoImpl
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:165)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:374)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.list(QuerySqmImpl.java:985)
	at org.hibernate.query.spi.AbstractSelectionQuery.uniqueResult(AbstractSelectionQuery.java:451)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.uniqueResult(QuerySqmImpl.java:1009)
	at org.redisson.hibernate.ReadWriteTest.testQuery(ReadWriteTest.java:111)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.hibernate.testing.junit4.ExtendedFrameworkMethod.invokeExplosively(ExtendedFrameworkMethod.java:45)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:288)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:282)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: org.hibernate.cache.CacheException: java.lang.IllegalArgumentException: java.io.NotSerializableException: org.hibernate.query.internal.QueryParameterBindingsImpl$ParameterBindingsMementoImpl
	at org.redisson.hibernate.RedissonStorage.getFromCache(RedissonStorage.java:115)
	at org.hibernate.cache.spi.support.DirectAccessRegionTemplate.getFromCache(DirectAccessRegionTemplate.java:39)
	at org.hibernate.cache.internal.QueryResultsCacheImpl.getCachedData(QueryResultsCacheImpl.java:145)
	at org.hibernate.cache.internal.QueryResultsCacheImpl.get(QueryResultsCacheImpl.java:88)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.resolveJdbcValuesSource(JdbcSelectExecutorStandardImpl.java:504)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:344)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:166)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.list(JdbcSelectExecutorStandardImpl.java:91)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:31)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$0(ConcreteSqmSelectQueryPlan.java:102)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:305)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:246)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:536)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:363)
	... 19 more
Caused by: java.lang.IllegalArgumentException: java.io.NotSerializableException: org.hibernate.query.internal.QueryParameterBindingsImpl$ParameterBindingsMementoImpl
	at org.redisson.command.CommandAsyncService.encodeMapKey(CommandAsyncService.java:698)
	at org.redisson.RedissonObject.encodeMapKey(RedissonObject.java:303)
	at org.redisson.RedissonMapCache.getWithTTLOnlyOperationAsync(RedissonMapCache.java:1276)
	at org.redisson.RedissonMapCache.getWithTTLOnlyAsync(RedissonMapCache.java:1283)
	at org.redisson.RedissonMapCache.getWithTTLOnly(RedissonMapCache.java:1255)
	at org.redisson.hibernate.RedissonStorage.getFromCache(RedissonStorage.java:105)
	... 32 more
Caused by: java.io.NotSerializableException: org.hibernate.query.internal.QueryParameterBindingsImpl$ParameterBindingsMementoImpl
	at org.jboss.marshalling.river.RiverMarshaller.doWriteObject(RiverMarshaller.java:274)
	at org.jboss.marshalling.river.RiverMarshaller.doWriteFields(RiverMarshaller.java:1143)
	at org.jboss.marshalling.river.RiverMarshaller.doWriteSerializableObject(RiverMarshaller.java:1101)
	at org.jboss.marshalling.river.RiverMarshaller.doWriteObject(RiverMarshaller.java:268)
	at org.jboss.marshalling.AbstractObjectOutput.writeObject(AbstractObjectOutput.java:58)
	at org.jboss.marshalling.AbstractMarshaller.writeObject(AbstractMarshaller.java:111)
	at org.redisson.codec.MarshallingCodec.lambda$new$1(MarshallingCodec.java:161)
	at org.redisson.command.CommandAsyncService.encodeMapKey(CommandAsyncService.java:696)
	... 37 more
Caused by: an exception which occurred:
	in field org.hibernate.cache.spi.QueryKey.parameterBindingsMemento
	in object org.hibernate.cache.spi.QueryKey@2ca4eab7
	in object org.hibernate.cache.spi.QueryKey@2ca4eab7

Running org.redisson.hibernate.TransactionalTest
Tests run: 4, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.185 sec <<< FAILURE!
testQuery(org.redisson.hibernate.TransactionalTest)  Time elapsed: 0.077 sec  <<< ERROR!
jakarta.persistence.PersistenceException: Converting `org.hibernate.cache.CacheException` to JPA `PersistenceException` : java.lang.IllegalArgumentException: java.io.NotSerializableException: org.hibernate.query.internal.QueryParameterBindingsImpl$ParameterBindingsMementoImpl
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:165)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:374)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.list(QuerySqmImpl.java:985)
	at org.hibernate.query.spi.AbstractSelectionQuery.uniqueResult(AbstractSelectionQuery.java:451)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.uniqueResult(QuerySqmImpl.java:1009)
	at org.redisson.hibernate.TransactionalTest.testQuery(TransactionalTest.java:68)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.hibernate.testing.junit4.ExtendedFrameworkMethod.invokeExplosively(ExtendedFrameworkMethod.java:45)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:288)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:282)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: org.hibernate.cache.CacheException: java.lang.IllegalArgumentException: java.io.NotSerializableException: org.hibernate.query.internal.QueryParameterBindingsImpl$ParameterBindingsMementoImpl
	at org.redisson.hibernate.RedissonStorage.getFromCache(RedissonStorage.java:115)
	at org.hibernate.cache.spi.support.DirectAccessRegionTemplate.getFromCache(DirectAccessRegionTemplate.java:39)
	at org.hibernate.cache.internal.QueryResultsCacheImpl.getCachedData(QueryResultsCacheImpl.java:145)
	at org.hibernate.cache.internal.QueryResultsCacheImpl.get(QueryResultsCacheImpl.java:88)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.resolveJdbcValuesSource(JdbcSelectExecutorStandardImpl.java:504)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:344)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:166)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.list(JdbcSelectExecutorStandardImpl.java:91)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:31)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$0(ConcreteSqmSelectQueryPlan.java:102)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:305)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:246)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:536)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:363)
	... 19 more
Caused by: java.lang.IllegalArgumentException: java.io.NotSerializableException: org.hibernate.query.internal.QueryParameterBindingsImpl$ParameterBindingsMementoImpl
	at org.redisson.command.CommandAsyncService.encodeMapKey(CommandAsyncService.java:698)
	at org.redisson.RedissonObject.encodeMapKey(RedissonObject.java:303)
	at org.redisson.RedissonMapCache.getWithTTLOnlyOperationAsync(RedissonMapCache.java:1276)
	at org.redisson.RedissonMapCache.getWithTTLOnlyAsync(RedissonMapCache.java:1283)
	at org.redisson.RedissonMapCache.getWithTTLOnly(RedissonMapCache.java:1255)
	at org.redisson.hibernate.RedissonStorage.getFromCache(RedissonStorage.java:105)
	... 32 more
Caused by: java.io.NotSerializableException: org.hibernate.query.internal.QueryParameterBindingsImpl$ParameterBindingsMementoImpl
	at org.jboss.marshalling.river.RiverMarshaller.doWriteObject(RiverMarshaller.java:274)
	at org.jboss.marshalling.river.RiverMarshaller.doWriteFields(RiverMarshaller.java:1143)
	at org.jboss.marshalling.river.RiverMarshaller.doWriteSerializableObject(RiverMarshaller.java:1101)
	at org.jboss.marshalling.river.RiverMarshaller.doWriteObject(RiverMarshaller.java:268)
	at org.jboss.marshalling.AbstractObjectOutput.writeObject(AbstractObjectOutput.java:58)
	at org.jboss.marshalling.AbstractMarshaller.writeObject(AbstractMarshaller.java:111)
	at org.redisson.codec.MarshallingCodec.lambda$new$1(MarshallingCodec.java:161)
	at org.redisson.command.CommandAsyncService.encodeMapKey(CommandAsyncService.java:696)
	... 37 more
Caused by: an exception which occurred:
	in field org.hibernate.cache.spi.QueryKey.parameterBindingsMemento
	in object org.hibernate.cache.spi.QueryKey@24599b17
	in object org.hibernate.cache.spi.QueryKey@24599b17


Results :

Tests in error: 
  testQuery(org.redisson.hibernate.ReadWriteTest): Converting `org.hibernate.cache.CacheException` to JPA `PersistenceException` : java.lang.IllegalArgumentException: java.io.NotSerializableException: org.hibernate.query.internal.QueryParameterBindingsImpl$ParameterBindingsMementoImpl
  testQuery(org.redisson.hibernate.TransactionalTest): Converting `org.hibernate.cache.CacheException` to JPA `PersistenceException` : java.lang.IllegalArgumentException: java.io.NotSerializableException: org.hibernate.query.internal.QueryParameterBindingsImpl$ParameterBindingsMementoImpl

Tests run: 10, Failures: 0, Errors: 2, Skipped: 0

[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  7.846 s
[INFO] Finished at: 2022-05-12T16:15:49+03:00
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.12.4:test (default-test) on project redisson-hibernate-6: There are test failures.