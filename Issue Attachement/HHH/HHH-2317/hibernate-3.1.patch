--- orig/hibernate-3.1/src/org/hibernate/tuple/PojoEntityTuplizer.java  2006-03-20 22:19:36.000000000 +0200
+++ new/hibernate-3.1/src/org/hibernate/tuple/PojoEntityTuplizer.java   2008-01-15 12:55:40.690595600 +0200
@@ -5,6 +5,7 @@
 import java.lang.reflect.Modifier;
 import java.util.HashSet;
 import java.util.Iterator;
+import java.util.LinkedHashSet;
 import java.util.Map;
 import java.util.Set;

@@ -90,8 +91,7 @@
        protected ProxyFactory buildProxyFactory(PersistentClass persistentClass, Getter idGetter, Setter idSetter) {
                // determine the id getter and setter methods from the proxy interface (if any)
         // determine all interfaces needed by the resulting proxy
-               HashSet proxyInterfaces = new HashSet();
-               proxyInterfaces.add( HibernateProxy.class );
+               HashSet proxyInterfaces = new LinkedHashSet();

                Class mappedClass = persistentClass.getMappedClass();
                Class proxyInterface = persistentClass.getProxyInterface();
@@ -125,6 +125,8 @@
                                proxyInterfaces.add( subclassProxy );
                        }
                }
+
+               proxyInterfaces.add( HibernateProxy.class );

                Iterator properties = persistentClass.getPropertyIterator();
                Class clazz = persistentClass.getMappedClass(); 