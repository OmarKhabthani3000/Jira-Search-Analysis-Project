11-01 13:41:54,051 INFO  Runner - Starting node 0/1
11 janv. 2011 13:41:54 org.apache.openejb.cdi.CdiBuilder <init>
INFO: Created new singletonService org.apache.openejb.cdi.ThreadSingletonServiceImpl@cbf9bd
11 janv. 2011 13:41:54 org.apache.openejb.cdi.CdiBuilder <init>
INFO: succeeded in installing singleton service
Apache OpenEJB 3.2-SNAPSHOT    build: 20110106-11:20
http://openejb.apache.org/
11-01 13:41:54,254 INFO  Log4jLogStream - openejb.home = D:\work35\HibernateTest
11-01 13:41:54,254 INFO  Log4jLogStream - openejb.base = D:\work35\HibernateTest
11-01 13:41:55,192 INFO  Log4jLogStream - Configuring Service(id=Default Security Service, type=SecurityService, provider-id=Default Security Service)
11-01 13:41:55,223 INFO  Log4jLogStream - Configuring Service(id=Default Transaction Manager, type=TransactionManager, provider-id=Default Transaction Manager)
11-01 13:41:55,223 INFO  Log4jLogStream - Configuring Service(id=jpacacheDS, type=Resource, provider-id=Default JDBC Database)
11-01 13:41:55,223 INFO  Log4jLogStream - Configuring Service(id=My Stateless Container, type=Container, provider-id=Default Stateless Container)
11-01 13:41:55,364 INFO  Log4jLogStream - Found EjbModule in classpath: D:\work35\HibernateTest\target\classes
11-01 13:41:55,395 INFO  Log4jLogStream - Found EjbModule in classpath: D:\work35\HibernateTest\target\test-classes
11-01 13:41:55,536 INFO  Log4jLogStream - Beginning load: D:\work35\HibernateTest\target\classes
11-01 13:41:56,754 INFO  Log4jLogStream - Beginning load: D:\work35\HibernateTest\target\test-classes
11-01 13:41:56,848 INFO  Log4jLogStream - Configuring enterprise application: classpath.ear
11-01 13:41:57,254 INFO  Log4jLogStream - Configuring PersistenceUnit(name=jpacache, provider=org.hibernate.ejb.HibernatePersistence)
11-01 13:41:57,254 INFO  Log4jLogStream - Auto-creating a Resource with id 'jpacacheDSNonJta' of type 'DataSource for 'jpacache'.
11-01 13:41:57,254 INFO  Log4jLogStream - Configuring Service(id=jpacacheDSNonJta, type=Resource, provider-id=jpacacheDS)
11-01 13:41:57,254 INFO  Log4jLogStream - Adjusting PersistenceUnit jpacache <non-jta-data-source> to Resource ID 'jpacacheDSNonJta' from 'null'
11-01 13:41:57,348 INFO  Log4jLogStream - Enterprise application "classpath.ear" loaded.
11-01 13:41:57,348 INFO  Log4jLogStream - Creating TransactionManager(id=Default Transaction Manager)
11-01 13:41:57,598 INFO  Log4jLogStream - Creating SecurityService(id=Default Security Service)
11-01 13:41:57,692 INFO  Log4jLogStream - Creating Resource(id=jpacacheDS)
11-01 13:41:57,739 INFO  Log4jLogStream - Creating Resource(id=jpacacheDSNonJta)
11-01 13:41:57,770 INFO  Log4jLogStream - Creating Container(id=My Stateless Container)
11-01 13:41:57,833 INFO  Log4jLogStream - Assembling app: classpath.ear
11-01 13:42:02,676 INFO  Log4jLogStream - PersistenceUnit(name=jpacache, provider=org.hibernate.ejb.HibernatePersistence) - provider time 4799ms
11-01 13:42:02,880 INFO  Log4jLogStream - Jndi(name=FamilyManagerBeanLocal) --> Ejb(deployment-id=FamilyManagerBean)
11 janv. 2011 13:42:02 org.apache.openejb.cdi.CdiBuilder createApplication
INFO: existing thread singleton service in SystemInstance() org.apache.openejb.cdi.ThreadSingletonServiceImpl@cbf9bd
11 janv. 2011 13:42:03 org.apache.openejb.cdi.OpenEJBLifecycle initialize
INFO: OpenWebBeans Container is starting...
11 janv. 2011 13:42:03 org.apache.webbeans.plugins.PluginLoader startApplication
INFO: Adding OpenWebBeansPlugin : [CdiPlugin]
11 janv. 2011 13:42:03 org.apache.openejb.cdi.BeansDeployer startApplication
INFO: All injection points were validated successfully.
11 janv. 2011 13:42:03 org.apache.openejb.cdi.OpenEJBLifecycle initialize
INFO: OpenWebBeans Container has started, it took [328] ms.
11-01 13:42:03,458 INFO  Log4jLogStream - Created Ejb(deployment-id=FamilyManagerBean, ejb-name=FamilyManagerBean, container=My Stateless Container)
11-01 13:42:03,661 INFO  Log4jLogStream - Started Ejb(deployment-id=FamilyManagerBean, ejb-name=FamilyManagerBean, container=My Stateless Container)
11-01 13:42:03,676 INFO  Log4jLogStream - Deployed Application(path=classpath.ear)
11-01 13:42:03,723 DEBUG Runner - JNDI Tree from root context ""
.: java.lang.String
FamilyManagerBeanLocal: org.apache.openejb.core.ivm.naming.BusinessLocalReference
-----
JNDI Tree from context "java:"
java:/openejb: org.apache.openejb.core.ivm.naming.IvmContext
  java:/openejb/local: org.apache.openejb.core.ivm.naming.IvmContext
    java:/openejb/local/.: java.lang.String
    java:/openejb/local/FamilyManagerBeanLocal: org.apache.openejb.core.ivm.naming.BusinessLocalReference
  java:/openejb/remote: org.apache.openejb.core.ivm.naming.IvmContext
    java:/openejb/remote/.: java.lang.String
  java:/openejb/client: org.apache.openejb.core.ivm.naming.IvmContext
    java:/openejb/client/.: java.lang.String
  java:/openejb/SecurityService: org.apache.openejb.core.security.SecurityServiceImpl
  java:/openejb/Deployment: org.apache.openejb.core.ivm.naming.IvmContext
    java:/openejb/Deployment/.: java.lang.String
    java:/openejb/Deployment/FamilyManagerBean: org.apache.openejb.core.ivm.naming.IvmContext
      java:/openejb/Deployment/FamilyManagerBean/test.FamilyManager: org.apache.openejb.core.ivm.naming.BusinessLocalReference
      java:/openejb/Deployment/FamilyManagerBean/test.FamilyManager!Local: org.apache.openejb.core.ivm.naming.BusinessLocalReference
  java:/openejb/Resource: org.apache.openejb.core.ivm.naming.IvmContext
    java:/openejb/Resource/jpacacheDS: org.apache.openejb.resource.jdbc.BasicManagedDataSource
    java:/openejb/Resource/jpacacheDSNonJta: org.apache.openejb.resource.jdbc.BasicDataSource
  java:/openejb/TransactionManager: org.apache.geronimo.transaction.manager.GeronimoTransactionManager
  java:/openejb/Container: org.apache.openejb.core.ivm.naming.IvmContext
    java:/openejb/Container/My Stateless Container: org.apache.openejb.core.stateless.StatelessContainer
  java:/openejb/PersistenceUnit: org.apache.openejb.core.ivm.naming.IvmContext
    java:/openejb/PersistenceUnit/jpacache -1322355338: org.hibernate.ejb.EntityManagerFactoryImpl
java:/comp: org.apache.openejb.core.ivm.naming.IvmContext
  java:/comp/UserTransaction: org.apache.openejb.core.CoreUserTransaction
  java:/comp/TransactionSynchronizationRegistry: org.apache.openejb.core.TransactionSynchronizationRegistryWrapper
  java:/comp/TransactionManager: org.apache.geronimo.transaction.manager.GeronimoTransactionManager

11-01 13:42:03,864 DEBUG FamilyManagerBean - query address.countAll
11-01 13:42:04,145 INFO  Runner - Found 0 addresses already imported in database.
11-01 13:42:04,145 DEBUG FamilyManagerBean - query family.countAll
11-01 13:42:04,161 INFO  Runner - Found 0 families already imported in database.
11-01 13:42:04,161 DEBUG FamilyManagerBean - query person.countAll()
11-01 13:42:04,161 INFO  Runner - Found 0 persons already imported in database.
11-01 13:42:04,161 INFO  Runner - Test 1 Family inserts with 1 threads
11-01 13:42:04,192 DEBUG FamilyManagerBean - persist new Family(id=0,name=Durand-0-0)
11-01 13:42:04,426 INFO  Runner - 1 Family inserts done in 0 seconds (3 TPS)
11-01 13:42:04,426 INFO  Runner - Test 1 Family updates with 1 threads
11-01 13:42:04,442 DEBUG FamilyManagerBean - find Family(id=0)
11-01 13:42:04,473 DEBUG FamilyManagerBean - find Family(id=0) and setSecondName(null-)
11-01 13:42:04,489 INFO  Runner - 1 Family updates done in 0 seconds (21 TPS)
11-01 13:42:04,489 INFO  Runner - Test 1 Family reads on same Entity with 1 threads
11-01 13:42:04,489 DEBUG FamilyManagerBean - find Family(id=0)
11-01 13:42:04,505 INFO  Runner - 1 Family reads on same Entity done in 0 seconds (62 TPS)
11-01 13:42:04,505 INFO  Runner - Test 1 Family reads on ordered Entity with 1 threads
11-01 13:42:04,505 DEBUG FamilyManagerBean - find Family(id=0)
11-01 13:42:04,520 INFO  Runner - 1 Family reads on ordered Entity done in 0 seconds (66 TPS)
11-01 13:42:04,520 INFO  Runner - Test 1 Family reads on random Entity with 1 threads
11-01 13:42:04,520 DEBUG FamilyManagerBean - find Family(id=0)
11-01 13:42:04,520 INFO  Runner - 1 Family reads on random Entity done in 0 seconds (0 TPS)
11-01 13:42:04,536 INFO  Runner - Test 1 Family removes on Entity with 1 threads
11-01 13:42:04,536 DEBUG FamilyManagerBean - find and remove Family(id=0)
11-01 13:42:04,770 INFO  Runner - 1 Family removes on Entity done in 0 seconds (4 TPS)
11-01 13:42:04,770 DEBUG FamilyManagerBean - query address.countAll
11-01 13:42:04,786 INFO  Runner - Found 0 addresses already imported in database.
11-01 13:42:04,801 DEBUG FamilyManagerBean - query family.countAll
11-01 13:42:04,801 INFO  Runner - Found 0 families already imported in database.
11-01 13:42:04,801 DEBUG FamilyManagerBean - query person.countAll()
11-01 13:42:04,801 INFO  Runner - Found 0 persons already imported in database.
11-01 13:42:04,801 INFO  Runner - Init by creating 1 Family + Address + 3*Persons with 1 threads
11-01 13:42:04,801 DEBUG FamilyManagerBean - persist new Family(id=0,name=Durand-0-0)
11-01 13:42:04,801 DEBUG FamilyManagerBean - persist new Address(id=0,streetNumber=0,streetName=rue 0,cityName=Paris,countryName=France)
11-01 13:42:04,801 DEBUG FamilyManagerBean - find Family(id=0) and persist new Person(id=0,firstName=Pierre-0)
11-01 13:42:04,848 DEBUG FamilyManagerBean - find Family(id=0) and persist new Person(id=1,firstName=Pierre-1)
11-01 13:42:04,864 DEBUG FamilyManagerBean - find Family(id=0) and persist new Person(id=2,firstName=Pierre-2)
11-01 13:42:04,895 INFO  Runner - 1 Family + Address + 3*Persons created in 0 seconds (10 TPS)
11-01 13:42:04,895 INFO  Runner - Test 3 Address.inhabitants inserts with 1 threads
11-01 13:42:04,895 DEBUG FamilyManagerBean - find Address(id=0), find Person(id=0) and setAddress()
11-01 13:42:04,895 DEBUG FamilyManagerBean - find Address(id=0)
11-01 13:42:04,911 DEBUG FamilyManagerBean - find Person(id=0)
11-01 13:42:04,926 DEBUG FamilyManagerBean - find Address(id=0), find Person(id=1) and setAddress()
11-01 13:42:04,926 DEBUG FamilyManagerBean - find Address(id=0)
11-01 13:42:04,942 DEBUG FamilyManagerBean - find Person(id=1)
Exception in thread Thread-11
javax.ejb.EJBException: The bean encountered a non-application exception; nested exception is: 
	org.hibernate.PropertyAccessException: Exception occurred inside setter of test.Person.address
	at org.apache.openejb.core.ivm.BaseEjbProxyHandler.convertException(BaseEjbProxyHandler.java:351)
	at org.apache.openejb.core.ivm.BaseEjbProxyHandler.invoke(BaseEjbProxyHandler.java:279)
	at $Proxy67.setAddressForPerson(Unknown Source)
	at test.Runner$CollectionInsertRunner.run(Runner.java:614)
	at java.lang.Thread.run(Thread.java:662)
Caused by: org.hibernate.PropertyAccessException: Exception occurred inside setter of test.Person.address
	at org.hibernate.property.BasicPropertyAccessor$BasicSetter.set(BasicPropertyAccessor.java:89)
	at org.hibernate.tuple.entity.AbstractEntityTuplizer.setPropertyValues(AbstractEntityTuplizer.java:583)
	at org.hibernate.tuple.entity.PojoEntityTuplizer.setPropertyValues(PojoEntityTuplizer.java:229)
	at org.hibernate.persister.entity.AbstractEntityPersister.setPropertyValues(AbstractEntityPersister.java:3822)
	at org.hibernate.engine.TwoPhaseLoad.initializeEntity(TwoPhaseLoad.java:152)
	at org.hibernate.loader.Loader.initializeEntitiesAndCollections(Loader.java:982)
	at org.hibernate.loader.Loader.doQuery(Loader.java:857)
	at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)
	at org.hibernate.loader.Loader.loadCollection(Loader.java:2166)
	at org.hibernate.loader.collection.CollectionLoader.initialize(CollectionLoader.java:62)
	at org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:627)
	at org.hibernate.event.def.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:83)
	at org.hibernate.impl.SessionImpl.initializeCollection(SessionImpl.java:1863)
	at org.hibernate.collection.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:369)
	at org.hibernate.collection.AbstractPersistentCollection.read(AbstractPersistentCollection.java:111)
	at org.hibernate.collection.AbstractPersistentCollection.readElementExistence(AbstractPersistentCollection.java:167)
	at org.hibernate.collection.PersistentSet.add(PersistentSet.java:210)
	at test.Address.addInhabitant(Address.java:103)
	at test.Person.setAddress(Person.java:107)
	at test.FamilyManagerBean.setAddressForPerson(FamilyManagerBean.java:584)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.openejb.core.interceptor.ReflectionInvocationContext$Invocation.invoke(ReflectionInvocationContext.java:182)
	at org.apache.openejb.core.interceptor.ReflectionInvocationContext.proceed(ReflectionInvocationContext.java:164)
	at org.apache.openejb.monitoring.StatsInterceptor.record(StatsInterceptor.java:174)
	at org.apache.openejb.monitoring.StatsInterceptor.invoke(StatsInterceptor.java:93)
	at sun.reflect.GeneratedMethodAccessor17.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.openejb.core.interceptor.ReflectionInvocationContext$Invocation.invoke(ReflectionInvocationContext.java:182)
	at org.apache.openejb.core.interceptor.ReflectionInvocationContext.proceed(ReflectionInvocationContext.java:164)
	at org.apache.openejb.cdi.CdiInterceptor.invoke(CdiInterceptor.java:132)
	at org.apache.openejb.cdi.CdiInterceptor.access$000(CdiInterceptor.java:46)
	at org.apache.openejb.cdi.CdiInterceptor$1.call(CdiInterceptor.java:64)
	at org.apache.openejb.cdi.CdiInterceptor$ScopeActivator.call(CdiInterceptor.java:97)
	at org.apache.openejb.cdi.CdiInterceptor$ScopeActivator.call(CdiInterceptor.java:97)
	at org.apache.openejb.cdi.CdiInterceptor.aroundInvoke(CdiInterceptor.java:70)
	at sun.reflect.GeneratedMethodAccessor16.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.openejb.core.interceptor.ReflectionInvocationContext$Invocation.invoke(ReflectionInvocationContext.java:182)
	at org.apache.openejb.core.interceptor.ReflectionInvocationContext.proceed(ReflectionInvocationContext.java:164)
	at org.apache.openejb.core.interceptor.InterceptorStack.invoke(InterceptorStack.java:126)
	at org.apache.openejb.core.stateless.StatelessContainer._invoke(StatelessContainer.java:224)
	at org.apache.openejb.core.stateless.StatelessContainer.invoke(StatelessContainer.java:176)
	at org.apache.openejb.core.ivm.EjbObjectProxyHandler.synchronizedBusinessMethod(EjbObjectProxyHandler.java:249)
	at org.apache.openejb.core.ivm.EjbObjectProxyHandler.businessMethod(EjbObjectProxyHandler.java:232)
	at org.apache.openejb.core.ivm.EjbObjectProxyHandler._invoke(EjbObjectProxyHandler.java:89)
	at org.apache.openejb.core.ivm.BaseEjbProxyHandler.invoke(BaseEjbProxyHandler.java:274)
	... 3 more
Caused by: java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.hibernate.property.BasicPropertyAccessor$BasicSetter.set(BasicPropertyAccessor.java:66)
	... 53 more
Caused by: org.hibernate.LazyInitializationException: illegal access to loading collection
	at org.hibernate.collection.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:366)
	at org.hibernate.collection.AbstractPersistentCollection.read(AbstractPersistentCollection.java:111)
	at org.hibernate.collection.AbstractPersistentCollection.readElementExistence(AbstractPersistentCollection.java:167)
	at org.hibernate.collection.PersistentSet.add(PersistentSet.java:210)
	at test.Address.addInhabitant(Address.java:103)
	at test.Person.setAddress(Person.java:107)
	... 58 more
11-01 13:42:36,161 INFO  Runner - 3 Address.inhabitants inserts done in 31 seconds (0 TPS)
11-01 13:42:36,224 INFO  Runner - Stopping node 0/1
11-01 13:42:36,239 INFO  Log4jLogStream - Destroying container system
11-01 13:42:36,239 INFO  Log4jLogStream - Undeploying app: classpath.ear
11-01 13:42:36,474 INFO  Log4jLogStream - Closing DataSource: jpacacheDS
11-01 13:42:36,489 INFO  Log4jLogStream - Closing DataSource: jpacacheDSNonJta
