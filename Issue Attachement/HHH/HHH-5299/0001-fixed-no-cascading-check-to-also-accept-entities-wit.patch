From 2666f31fbc1a78ea9949d200a22b576ec9ce4b1a Mon Sep 17 00:00:00 2001
From: Carl-Eric Menzel <cmenzel@wicketbuch.de>
Date: Tue, 8 Jun 2010 19:38:23 +0200
Subject: [PATCH] fixed no-cascading check to also accept entities with SAVING status

---
 .../java/org/hibernate/engine/CascadingAction.java |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/core/src/main/java/org/hibernate/engine/CascadingAction.java b/core/src/main/java/org/hibernate/engine/CascadingAction.java
index 25de282..f206611 100755
--- a/core/src/main/java/org/hibernate/engine/CascadingAction.java
+++ b/core/src/main/java/org/hibernate/engine/CascadingAction.java
@@ -388,7 +388,8 @@ public abstract class CascadingAction {
 
 		private boolean isInManagedState(Object child, EventSource session) {
 			EntityEntry entry = session.getPersistenceContext().getEntry( child );
-			return entry != null && (entry.getStatus() == Status.MANAGED || entry.getStatus() == Status.READ_ONLY);
+			return entry != null && (entry.getStatus() == Status.MANAGED || entry.getStatus() == Status.READ_ONLY || 
+			        entry.getStatus() == Status.SAVING);
 		}
 
 		public String toString() {
-- 
1.6.3.3

