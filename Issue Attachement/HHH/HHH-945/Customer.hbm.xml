<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC 
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
    
<hibernate-mapping>
<!-- 
    Created by the Middlegen Hibernate plugin 2.1

    http://boss.bekk.no/boss/middlegen/
    http://www.hibernate.org/
-->

<class 
    name="uk.co.fresca.pojo.Customer" 
    table="customer"
>
    <meta attribute="class-description" inherit="false">
       @hibernate.class
        table="customer"
    </meta>

    <meta attribute="implement-equals" inherit="false">true</meta>

    <id
        name="id"
        type="java.lang.Integer"
        column="id"
    >
    	<meta attribute="use-in-equals">true</meta>
        <meta attribute="use-in-tostring">true</meta>
        <meta attribute="field-description">
           @hibernate.id
            generator-class="assigned"
            type="java.lang.Integer"
            column="id"

        </meta>
        <generator class="identity" />
    </id>

    <property
        name="email"
        type="java.lang.String"
        column="email"
        not-null="true"
        unique="true"
        length="100"
    >
    	<meta attribute="use-in-equals">true</meta>
        <meta attribute="use-in-tostring">true</meta>
        <meta attribute="field-description">
           @hibernate.property
            column="email"
            unique="true"
            length="100"
            not-null="true"
        </meta>    
    </property>
    <property
        name="password"
        type="java.lang.String"
        column="password"
        not-null="true"
        length="100"
    >
    	<meta attribute="use-in-equals">true</meta>
        <meta attribute="field-description">
           @hibernate.property
            column="password"
            length="100"
            not-null="true"
        </meta>    
    </property>
    <property
        name="title"
        type="java.lang.String"
        column="title"
        length="10"
    >
    	<meta attribute="use-in-equals">true</meta>
        <meta attribute="use-in-tostring">true</meta>
        <meta attribute="field-description">
           @hibernate.property
            column="title"
            length="10"
        </meta>    
    </property>
    <property
        name="firstName"
        type="java.lang.String"
        column="first_name"
        not-null="true"
        length="100"
    >
        <meta attribute="use-in-tostring">true</meta>
        <meta attribute="field-description">
           @hibernate.property
            column="first_name"
            length="100"
            not-null="true"
        </meta>    
    </property>
    <property
        name="lastName"
        type="java.lang.String"
        column="last_name"
        not-null="true"
        length="100"
    >
    	<meta attribute="use-in-equals">true</meta>
        <meta attribute="use-in-tostring">true</meta>
        <meta attribute="field-description">
           @hibernate.property
            column="last_name"
            length="100"
            not-null="true"
        </meta>    
    </property>
    <property
        name="telephone"
        type="java.lang.String"
        column="telephone"
        not-null="true"
        length="50"
    >
    	<meta attribute="use-in-equals">true</meta>
        <meta attribute="field-description">
           @hibernate.property
            column="telephone"
            length="50"
            not-null="true"
        </meta>    
    </property>
    <property
        name="mobileTelephone"
        type="java.lang.String"
        column="mobileTelephone"
        length="50"
    >
    	<meta attribute="use-in-equals">true</meta>
       <meta attribute="field-description">
           @hibernate.property
            column="mobileTelephone"
            length="50"
        </meta>    
    </property>
    <property
        name="emailOptOut"
        type="java.lang.String"
        column="email_opt_out"
        not-null="true"
        length="1"
    >
        <meta attribute="field-description">
           @hibernate.property
            column="email_opt_out"
            length="1"
            not-null="true"
        </meta>    
    </property>
    <property
        name="createdDts"
        type="java.sql.Timestamp"
        column="created_dts"
        not-null="true"
        length="19"
    >
        <meta attribute="field-description">
           @hibernate.property
            column="created_dts"
            length="19"
            not-null="true"
        </meta>    
    </property>
    <property
        name="createdBy"
        type="java.lang.String"
        column="created_by"
        not-null="true"
        length="50"
    >
        <meta attribute="field-description">
           @hibernate.property
            column="created_by"
            length="50"
            not-null="true"
        </meta>    
    </property>
    <property
        name="lastUpdatedDts"
        type="java.sql.Timestamp"
        column="last_updated_dts"
        length="14"
    >
        <meta attribute="field-description">
           @hibernate.property
            column="last_updated_dts"
            length="14"
        </meta>    
    </property>
    <property
        name="lastUpdatedBy"
        type="java.lang.String"
        column="last_updated_by"
        not-null="true"
        length="50"
    >
        <meta attribute="field-description">
           @hibernate.property
            column="last_updated_by"
            length="50"
            not-null="true"
        </meta>    
    </property>

    <!-- Associations -->
  
    <!-- bi-directional one-to-many association to Order -->
    <!--
    	IMPORTANT READ BEFORE CHANGING ORDERS RELATIONSHIP:
    	Cascade is none on orders due to experience of issues on order process.
    	If you place an order but it fails auth, then go back to beginning of order
    	process and go back to payment details, the customer is re-persisted and so
    	is the order.  cascade=none stops this.
    -->
    <set
        name="orders"
        lazy="true"
        inverse="true"
		cascade="none"
    >
        <meta attribute="field-description">
           @hibernate.set
            lazy="true"
            inverse="true"
            cascade="none"

           @hibernate.collection-key
            column="customer_id"

           @hibernate.collection-one-to-many
            class="uk.co.fresca.pojo.Order"
        </meta>
        <key>
            <column name="customer_id" />
        </key>
        <one-to-many 
            class="uk.co.fresca.pojo.Order"
        />
    </set>
    <!-- bi-directional one-to-many association to Address -->
    <set
        name="addresses"
        lazy="false"
        inverse="true"
		cascade="all"
    >
        <meta attribute="field-description">
           @hibernate.set
            lazy="false"
            inverse="true"
            cascade="all"

           @hibernate.collection-key
            column="customer_id"

           @hibernate.collection-one-to-many
            class="uk.co.fresca.pojo.Address"
        </meta>
        <key>
            <column name="customer_id" />
        </key>
        <one-to-many 
            class="uk.co.fresca.pojo.Address"
        />
    </set>
 <!-- bi-directional one-to-many association to CustomerAttributeValue -->
    <set
        name="customerAttributeValues"
        lazy="true"
        inverse="true"
		cascade="none"
    >
        <meta attribute="field-description">
           @hibernate.set
            lazy="true"
            inverse="true"
            cascade="none"

           @hibernate.collection-key
            column="id"

           @hibernate.collection-one-to-many
            class="uk.co.fresca.pojo.CustomerAttributeValue"
        </meta>
        <key>
            <column name="id" />
        </key>
        <one-to-many 
            class="uk.co.fresca.pojo.CustomerAttributeValue"
        />
    </set>
</class>
</hibernate-mapping>
