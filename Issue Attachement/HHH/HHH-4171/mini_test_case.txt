package com.lodh.position.custodian.entity;

import java.util.ArrayList;
import java.util.List;

import javax.ejb.SessionContext;

import junit.framework.Assert;

import org.apache.log4j.Logger;
import org.junit.Test;

import com.lodh.util.filter.DecorationFilter;
import com.lodh.util.filter.FilterDecoration;
import com.lodh.util.jpa.JPAFilter;
import com.lodh.util.jpa.JPAHelper;

public class CustodianTest {
    private static final Logger log = Logger.getLogger(CustodianTest.class);

    private static Delegate delegate = decorate(new Delegate(), null, log);

    public static <T> T decorate(T target, SessionContext sessionContext, Logger log) {
        List<DecorationFilter> filters = new ArrayList<DecorationFilter>();
        filters.add(new JPAFilter(sessionContext));
        return FilterDecoration.decorate(target, filters);
    }

    @Test
    public void myTest() {
        delegate.assertEmptyDb();
        CustodianEty cust = delegate.createCustodian();
        delegate.associateNewAccountWithExistingCustodian(cust.getId(), "123");
    }


    private static class Delegate {
        public Delegate() {
        }
        
        public void assertEmptyDb() {
            Assert.assertTrue(JPAHelper.getEntityManager().createQuery("select c from CustodianEty c").getResultList().isEmpty());
        }

        public CustodianEty createCustodian() {
            CustodianEty cust = new CustodianEty();
            cust.setReference(new CustodianRefEty("123"));
            cust.setName("bar");
            JPAHelper.getEntityManager().persist(cust);
            return cust;
        }
        
        public CustodianEty associateNewAccountWithExistingCustodian(Long custId, String ref) {
            CustodianEty cust = JPAHelper.getEntityManager().find(CustodianEty.class, custId);
            CustodianAccountEty acc = new CustodianAccountEty();
            acc.setReference(new CustodianAccountRefEty(ref));
            acc.setName("foo");
            cust.addAccount(acc);
            JPAHelper.getEntityManager().persist(acc);
            log.debug(cust.getAccounts());
            return cust;
        }
    }

}



2007-09-17 09:28:07,468 [INFO ] com.lodh.util.jpa.CallContext - no transaction manager: working in JSE mode
2007-09-17 09:28:07,500 [INFO ] com.lodh.util.properties.search.ClasspathSearcher - START: Search properties in EAR (or jar for standalone application) with pattern 'META-INF/application.xml'
2007-09-17 09:28:07,500 [DEBUG] com.lodh.util.properties.search.ClasspathSearcher - Add file '/E:/views/Position_Back/SchemaDirecteur/Position_Back/src/PositionFramework/target/test-classes/com/lodh/properties/application.properties' in ressources to lookup for static properties.
2007-09-17 09:28:07,671 [INFO ] com.lodh.util.properties.search.ClasspathSearcher - END: Search properties in EAR. found : 0 element(s) in CP
2007-09-17 09:28:07,671 [INFO ] com.lodh.util.properties.search.ClasspathSearcher - START: Search properties in EAR (or jar for standalone application) with pattern 'WEB-INF/web.xml'
2007-09-17 09:28:07,671 [DEBUG] com.lodh.util.properties.search.ClasspathSearcher - Add file '/E:/views/Position_Back/SchemaDirecteur/Position_Back/src/PositionFramework/target/test-classes/com/lodh/properties/application.properties' in ressources to lookup for static properties.
2007-09-17 09:28:07,687 [INFO ] com.lodh.util.properties.search.ClasspathSearcher - END: Search properties in EAR. found : 0 element(s) in CP
2007-09-17 09:28:07,687 [INFO ] com.lodh.util.properties.search.ClasspathSearcher - START: Search properties in EAR (or jar for standalone application) with pattern 'com/lodh/.*properties'
2007-09-17 09:28:07,687 [DEBUG] com.lodh.util.properties.search.ClasspathSearcher - Add file '/E:/views/Position_Back/SchemaDirecteur/Position_Back/src/PositionFramework/target/test-classes/' in ressources to lookup for static properties.
2007-09-17 09:28:07,703 [DEBUG] com.lodh.util.properties.search.ResourceSearcher - Found fileName = com/lodh/properties/application.properties
2007-09-17 09:28:08,140 [INFO ] com.lodh.util.properties.search.ClasspathSearcher - END: Search properties in EAR. found : 1 element(s) in CP
2007-09-17 09:28:08,140 [INFO ] com.lodh.util.properties.LodhProperties - *** Reading static properties from file 'com/lodh/properties/application.properties'
2007-09-17 09:28:08,156 [DEBUG] com.lodh.util.properties.PropertiesManager - 1 static properties files added
2007-09-17 09:28:08,156 [DEBUG] com.lodh.util.properties.search.ClasspathSearcher - START: Search properties in global CP with pattern '^Position/((?!/).)*.properties$'
2007-09-17 09:28:08,156 [DEBUG] com.lodh.util.properties.search.ClasspathSearcher - Found  Resource='/E:/views/Position_Back/SchemaDirecteur/Position_Back/src/PositionDA/target/test-classes/' 
2007-09-17 09:28:08,156 [DEBUG] com.lodh.util.properties.search.ClasspathSearcher - Classpath to parse for dynamic properties is /E:/views/Position_Back/SchemaDirecteur/Position_Back/src/PositionDA/target/test-classes/
2007-09-17 09:28:08,171 [DEBUG] com.lodh.util.properties.search.ClasspathSearcher - END: Search properties in global CP. found : 0 element(s) in CP
2007-09-17 09:28:08,171 [DEBUG] com.lodh.util.properties.PropertiesManager - 0 dynamic properties files added
2007-09-17 09:28:08,218 [INFO ] com.lodh.util.jpa.CallContext - no file META-INF/Position-ds.properties found to further cutomize persistence unit
2007-09-17 09:28:08,218 [DEBUG] com.lodh.util.jpa.CallContext - init. factory for persistence unit Position with properties {hibernate.cache.use_minimal_puts=true, hibernate.connection.driver_class=org.hsqldb.jdbcDriver, hibernate.cache.provider_class=org.hibernate.cache.TreeCacheProvider, hibernate.cache.use_query_cache=true, hibernate.dialect=org.hibernate.dialect.HSQLDialect, hibernate.max_fetch_depth=3, hibernate.cache.use_second_level_cache=true, hibernate.cache.provider_configuration_file_resource_path=Position//treecache.xml, hibernate.format_sql=true, hibernate.cache.use_structured_entries=true, hibernate.jdbc.batch_size=0, hibernate.connection.username=sa, hibernate.cache.region_prefix=Position, hibernate.hbm2ddl.auto=create-drop, hibernate.connection.url=jdbc:hsqldb:mem:test_db;sql.enforce_strict_size=true, hibernate.connection.password=}
2007-09-17 09:28:08,312 [INFO ] org.hibernate.cfg.annotations.Version - Hibernate Annotations 3.3.0.GA
2007-09-17 09:28:08,343 [INFO ] org.hibernate.cfg.Environment - Hibernate 3.2.2
2007-09-17 09:28:08,343 [INFO ] org.hibernate.cfg.Environment - hibernate.properties not found
2007-09-17 09:28:08,359 [INFO ] org.hibernate.cfg.Environment - Bytecode provider name : cglib
2007-09-17 09:28:08,390 [INFO ] org.hibernate.cfg.Environment - using JDK 1.4 java.sql.Timestamp handling
2007-09-17 09:28:08,484 [INFO ] org.hibernate.ejb.Version - Hibernate EntityManager 3.3.1.GA
2007-09-17 09:28:09,078 [INFO ] org.hibernate.cfg.Configuration - Reading mappings from resource : com/lodh/position/named-queries-instrument.xml
2007-09-17 09:28:09,359 [INFO ] org.hibernate.cfg.Configuration - Reading mappings from resource : com/lodh/position/named-queries.xml
2007-09-17 09:28:09,453 [INFO ] org.hibernate.cfg.Configuration - Reading mappings from resource : com/lodh/position/mappings.xml
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Duration.findByCode => select d from DurationDefinitionEty d where d.duration = :durationCode
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: CallDelay.findByCode => select cd from CallDelayDefinitionEty cd where cd.callDelay = :delayCode
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Counterpart.findByPortfolioRef => select cp from CounterpartEty cp where cp.portfolioRef = :portfolioRef
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: SecurityInstrument.find => select s from SecurityInstrumentEty s where s.securityRef = :securityRef
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: FwdSecurityInstrument.find => select s from ForwardSecurityInstrumentEty s where s.securityInstrument.securityRef = :securityRef and s.maturityDate = :maturityDate
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: CashInstrument.find => select c from CashInstrumentEty c where c.currencyRef = :currencyRef and c.rubricCode = :rubricCode and c.accountTypeCode = :accountTypeCode
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: FwdCashInstrument.find => select fc from ForwardCashInstrumentEty fc where fc.cashInstrument.currencyRef = :currencyRef and fc.cashInstrument.rubricCode = :rubricCode and fc.cashInstrument.accountTypeCode = :accountTypeCode and fc.maturityDate = :maturityDate
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: FwdCounterValueInstrument.find => select fcv from ForwardCounterValueCashInstrumentEty fcv where fcv.fwdCashInstrument.cashInstrument.currencyRef = :currencyRef and fcv.fwdCashInstrument.cashInstrument.rubricCode = :rubricCode and fcv.fwdCashInstrument.cashInstrument.accountTypeCode = :accountTypeCode and fcv.fwdCashInstrument.maturityDate = :maturityDate and fcv.fwdSecurityInstrument.securityInstrument.securityRef = :securityRef and fcv.fwdSecurityInstrument.maturityDate = :maturityDate
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: FwdForexInstrument.find => select ff from ForwardForexInstrumentEty ff where ff.fwdCashBoughtInstrument = :fwdCashBoughtInstrument and ff.fwdCashSoldInstrument = :fwdCashSoldInstrument and ff.operation = :operation and ff.openDate = :openDate and (ff.exchangeRate = :exchangeRate or (ff.exchangeRate is null and :exchangeRate is null))
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: PrepaidFundInstrument.find => select pf from PrepaidFundInstrumentEty pf where pf.cashInstrument.currencyRef = :currencyRef and pf.cashInstrument.rubricCode = :rubricCode and pf.cashInstrument.accountTypeCode = :accountTypeCode and pf.securityInstrument.securityRef = :securityRef
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: FixedLoanDepositInstrument.find => select fld from FixedLoanDepositInstrumentEty fld where fld.type = :type and fld.style = :style and (fld.maturityDate = :maturityDate or (fld.maturityDate is null and :maturityDate is null)) and (fld.startDate = :startDate or (fld.startDate is null and :startDate is null)) and (fld.interestRate = :interestRate or (fld.interestRate is null and :interestRate is null)) and (fld.contractRef.type = :contractRef_type or (fld.contractRef.type is null and :contractRef_type is null )) and (fld.contractRef.value = :contractRef_value or (fld.contractRef.value is null and :contractRef_value is null )) and (fld.durationDef = :duration or (fld.durationDef is null and :duration is null)) and fld.cashInstrument = :cashInstrument and fld.counterpart.portfolioRef = :cptRef
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: FixedLoanDepositInstrument.findNoCounterpart => select fld from FixedLoanDepositInstrumentEty fld where fld.type = :type and fld.style = :style and (fld.maturityDate = :maturityDate or (fld.maturityDate is null and :maturityDate is null)) and (fld.startDate = :startDate or (fld.startDate is null and :startDate is null)) and (fld.interestRate = :interestRate or (fld.interestRate is null and :interestRate is null)) and (fld.contractRef.type = :contractRef_type or (fld.contractRef.type is null and :contractRef_type is null )) and (fld.contractRef.value = :contractRef_value or (fld.contractRef.value is null and :contractRef_value is null )) and (fld.durationDef = :duration or (fld.durationDef is null and :duration is null)) and fld.cashInstrument = :cashInstrument and fld.counterpart is null
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: FixedLoanDepositInstrument.getByContractRef => select fld from FixedLoanDepositInstrumentEty fld where fld.contractRef = :contractRef
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: OnCallLoanDepositInstrument.find => select ocld from OnCallLoanDepositInstrumentEty ocld where ocld.type = :type and ocld.style = :style and ocld.callDelayDef.callDelay = :callDelay and (ocld.startDate = :startDate or (ocld.startDate is null and :startDate is null)) and (ocld.interestRate = :interestRate or (ocld.interestRate is null and :interestRate is null)) and (ocld.contractRef.type = :contractRef_type or (ocld.contractRef.type is null and :contractRef_type is null )) and (ocld.contractRef.value = :contractRef_value or (ocld.contractRef.value is null and :contractRef_value is null )) and ocld.cashInstrument = :cashInstrument and ocld.counterpart.portfolioRef = :counterpartRef
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: OnCallLoanDepositInstrument.findNoCounterpart => select ocld from OnCallLoanDepositInstrumentEty ocld where ocld.type = :type and ocld.style = :style and ocld.callDelayDef.callDelay = :callDelay and (ocld.startDate = :startDate or (ocld.startDate is null and :startDate is null)) and (ocld.interestRate = :interestRate or (ocld.interestRate is null and :interestRate is null)) and (ocld.contractRef.type = :contractRef_type or (ocld.contractRef.type is null and :contractRef_type is null )) and (ocld.contractRef.value = :contractRef_value or (ocld.contractRef.value is null and :contractRef_value is null )) and ocld.cashInstrument = :cashInstrument and ocld.counterpart is null
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: OnCallLoanDepositInstrument.getByContractRef => select ocld from OnCallLoanDepositInstrumentEty ocld where ocld.contractRef = :contractRef
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: InterestRateSwapInstrument.find => select irs from InterestRateSwapInstrumentEty irs where irs.deposit = :deposit and irs.loan = :loan
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: AccountingContext.findFirst => select ac from AccountingContextEty ac
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: User.findIdByUserName => select u from UserEty u where userName = :userName
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: UserEty.findAll => select u from UserEty u
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: AmountType.findByRef => select t from AmountTypeEty t where t.amountTypeCode = :ref
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: CashPosition.find => select cp from CashPositionEty cp where cp.instrumentId = :instrumentId and cp.portfolio = :portfolio and cp.positionState = :state and (cp.participationRole = :cpr or (cp.participationRole is null and :cpr is null))
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: CashPosition.findByIdInSrcSystem => select cp from CashPositionEty cp where cp.positionIdInSourceSystem = :id
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: SecurityPosition.find => select sp from SecurityPositionEty sp where sp.instrumentId = :instrumentId and sp.portfolio = :portfolio and sp.positionState = :state and (sp.shortLong = :shortLong or (sp.shortLong is null and :shortLong is null) )
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Position.findByState => select p from PositionEty p where p.positionState = :state
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Position.findByPortfolioAndState => select p from PositionEty p where p.portfolio = :portfolio and p.positionState = :state
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Position.findByPortfolioRef => select p from PositionEty p where p.portfolio.portfolioRef.reference = :clidos and p.portfolio.portfolioRef.legalEntityRef = :entity
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: SecurityPositionCustodian.find => select spc from SecurityPositionCustodianEty spc where spc.position = :position and spc.custodianAccount = :account
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: FwdForexParticipationRole.find => select ffpr from ForwardForexParticipationRoleEty ffpr where (ffpr.contractRef.type= :contractType or (ffpr.contractRef.type is null and :contractType is null)) and (ffpr.contractRef.value = :contractRef or (ffpr.contractRef.value is null and :contractRef is null)) and ffpr.role = :role and ffpr.compositeId = :compositeId
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: IRSwapParticipationRole.find => select irspr from InterestRateSwapParticipationRoleEty irspr where (irspr.contractRef.type= :contractType or (irspr.contractRef.type is null and :contractType is null)) and (irspr.contractRef.value = :contractRef or (irspr.contractRef.value is null and :contractRef is null)) and irspr.role = :role and irspr.compositeId = :compositeId
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: SecurityCustodianInfo.findByState => SELECT new com.lodh.position.custodian.entity.SecurityCustodianInfo(spc.position.id, cus.id, spc.quantity) FROM SecurityPositionCustodianEty spc, CustodianAccountEty cusAcc, CustodianEty cus, PositionEty pos WHERE pos.positionState = :state AND spc.position = pos AND spc.custodianAccount = cusAcc AND cusAcc.custodian = cus
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Transaction.findByRef => select t from TransactionEty t where t.reference = :ref
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Transaction.findByOrderRefAndState => select t from TransactionEty t where t.state=:state and t.operation.operationRef.type = :orderType and t.operation.operationRef.reference = :orderRef
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Transaction.findAccountedByOrderRefAndExternalRefAndStateAndReversalStatus => select t from TransactionEty t where t.state = :state and t.externalReference = :extRef and t.operation.operationRef.type = :orderType and t.operation.operationRef.reference = :orderRef and t.reversalStatus = :reversal
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Transaction.findAccountedByOrderRefAndStateAndReversalStatus => select t from TransactionEty t where t.state = :state and t.operation.operationRef.type = :orderType and t.operation.operationRef.reference = :orderRef and t.reversalStatus = :reversal
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Operation.findByRef => select o from OperationEty o where o.operationRef.reference = :valueRef and o.operationRef.type = :typeRef
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Order.findByRef => select o from OrderEty o where o.operationRef.reference = :valueRef and o.operationRef.type = :typeRef
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Order.findVersions => select ov from com.lodh.position.entity.OrderVersionEty ov where ov.order = :order
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Order.findRootVersions => select ovRoot from com.lodh.position.entity.StockOrderVersionEty ovRoot, com.lodh.position.entity.StockOrderVersionEty ovSlave where ovSlave.order = :order and ovRoot.switchOrderVersion = ovSlave
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Order.findLatestVersion => select ov from com.lodh.position.entity.OrderVersionEty ov where ov.order = :order and ov.isLatestVersion = true
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Order.findLatestVersionByRef => select ov from com.lodh.position.entity.OrderVersionEty ov where ov.order.operationRef.reference = :valueRef and ov.order.operationRef.type = :typeRef and ov.isLatestVersion = true
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Order.findListLatestVersionByRef => select ov from com.lodh.position.entity.OrderVersionEty ov where ov.order.operationRef.reference in (:valueRefs) and ov.order.operationRef.type = :typeRef and ov.isLatestVersion = true
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Order.findCashOrdersByPortfolioRef => select ov from CashOrderVersionEty ov where ov.isLatestVersion = :isLatest and ov.order.isPending = :isPending and ov.debitPortfolio.portfolioRef = :portfolioRef
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Order.findCashInternalOrdersByPortfolioRef => select ov from CashInternalOrderVersionEty ov where ov.isLatestVersion = :isLatest and ov.order.isPending = :isPending and ( (( ov.debitPortfolio.portfolioRef.reference = :reference ) and ( ov.debitPortfolio.portfolioRef.legalEntityRef = :legalEntityRef )) or (( ov.creditPortfolio.portfolioRef.reference = :reference ) and ( ov.creditPortfolio.portfolioRef.legalEntityRef = :legalEntityRef ) ) )
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Order.findFixedLoanDepositOrdersByPortfolioRef => select ov from FixedLoanDepositOrderVersionEty ov where ov.isLatestVersion = :isLatest and ov.order.isPending = :isPending and ov.portfolio.portfolioRef = :portfolioRef
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Order.findOnCallDepositOrdersByPortfolioRef => select ov from OnCallLoanDepositOrderVersionEty ov where ov.isLatestVersion = :isLatest and ov.order.isPending = :isPending and ov.portfolio.portfolioRef = :portfolioRef
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Order.findStockOrdersByPortfolioRef => select ov from StockOrderVersionEty ov where ov.isLatestVersion = :isLatest and ov.order.isPending = :isPending and ov.portfolio.portfolioRef = :portfolioRef
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Order.findForexOrdersByPortfolioRef => select ov from ForexOrderVersionEty ov where ov.isLatestVersion = :isLatest and ov.order.isPending = :isPending and ov.portfolio.portfolioRef = :portfolioRef
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Order.findPendingOrders => select o from OrderEty o where o.isPending = :isPending
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Order.findPendingCashOrders => select ov from CashOrderVersionEty ov where ov.isLatestVersion = :isLatest and ov.order.isPending = :isPending
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Order.findPendingCashInternalOrders => select ov from CashInternalOrderVersionEty ov where ov.isLatestVersion = :isLatest and ov.order.isPending = :isPending
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Order.findPendingFixedLoanDepositOrders => select ov from FixedLoanDepositOrderVersionEty ov where ov.isLatestVersion = :isLatest and ov.order.isPending = :isPending
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Order.findPendingOnCallDepositOrders => select ov from OnCallLoanDepositOrderVersionEty ov where ov.isLatestVersion = :isLatest and ov.order.isPending = :isPending
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Order.findPendingStockOrders => select ov from StockOrderVersionEty ov where ov.isLatestVersion = :isLatest and ov.order.isPending = :isPending
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Order.findPendingForexOrders => select ov from ForexOrderVersionEty ov where ov.isLatestVersion = :isLatest and ov.order.isPending = :isPending
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Movement.findForTransaction => select m from com.lodh.position.entity.MovementEty m where m.transaction = :transaction
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Movement.findCashMovementsByIds => select m from CashMovementEty m where m.id in (:ids)
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Movement.findCashMovementsByIdsInSrcSystem => select m from CashMovementEty m where m.idMvtInSourceSystem in (:ids)
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Movement.findUnlinkedReversedCashMovements => select m from CashMovementEty m where m.idMvtRevInSourceSystem is not null and ((select count(r) from CashMovementEty r where r.idMvtInSourceSystem = m.idMvtRevInSourceSystem and r.reversed is null) > 0)
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Movement.countCashMovementsWithReversalNotExisting => select count(m) from CashMovementEty m where m.idMvtRevInSourceSystem is not null and ((select count(r) from CashMovementEty r where r.idMvtInSourceSystem = m.idMvtRevInSourceSystem and r.reversed is null) = 0)
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Transaction.getNumberOfCashMovements => select count(m) from CashMovementEty m where m.transaction = :transaction
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Movement.findSecurityMovementsByIds => select m from SecurityMovementEty m where m.id in (:ids)
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Movement.findSecurityMovementsByIdsInSrcSystem => select m from SecurityMovementEty m where m.idMvtInSourceSystem in (:ids)
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Transaction.getNumberOfSecurityMovements => select count(m) from SecurityMovementEty m where m.transaction = :transaction
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Movement.findUnlinkedReversedSecurityMovements => select m from SecurityMovementEty m where m.idMvtRevInSourceSystem is not null and ((select count(r) from SecurityMovementEty r where r.idMvtInSourceSystem = m.idMvtRevInSourceSystem and r.reversed is null) > 0)
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Movement.countSecurityMovementsWithReversalNotExisting => select count(m) from SecurityMovementEty m where m.idMvtRevInSourceSystem is not null and ((select count(r) from SecurityMovementEty r where r.idMvtInSourceSystem = m.idMvtRevInSourceSystem and r.reversed is null) = 0)
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Transaction.findMovements => select mvt from com.lodh.position.entity.MovementEty mvt where mvt.transaction = :transaction
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Portfolios.findAll => select p from PortfolioEty p
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Portfolio.findByCliDos => select portfolio from PortfolioEty portfolio where portfolio.portfolioRef.reference = :cliDos
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Portfolio.findByReference => select portfolio from PortfolioEty portfolio where portfolio.portfolioRef = :reference
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Portfolios.findByReference => select p from PortfolioEty p where p.portfolioRef.reference IN (:references)
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Portfolios.findInterestTypes => select t from PortfolioInterestTypeEty t where t.portfolio = :portfolio
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: PortfolioInterestTypes.find => select t from PortfolioInterestTypeEty t where t.portfolio = :portfolio and t.startDate = :startDate
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Currency.findByCurrencyRef => select c from CurrencyEty c where c.currencyRef = :currencyRef
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Currency.findAll => select c from CurrencyEty c
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Custodian.findByRef => select c from CustodianEty c where c.reference = :ref
2007-09-17 09:28:10,515 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: CustodianAccount.findByRef => select c from CustodianAccountEty c where c.reference = :ref
2007-09-17 09:28:10,531 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: CustodianAccount.findByRefs => select c from CustodianAccountEty c where c.reference IN (:refs)
2007-09-17 09:28:10,531 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: ClientPortfolioCustodianAccount.findByRef => select c from ClientPortfolioCustodianAccountEty c where c.reference = :ref
2007-09-17 09:28:10,531 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: ClientPortfolioCustodianAccount.findByCustAndPfref => select c from ClientPortfolioCustodianAccountEty c where c.custodian.reference = :ref and c.clientPortfolio.portfolioRef = :pfref
2007-09-17 09:28:10,531 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: CustodianAccount.findMainAccountByCustodianRef => select c from CustodianAccountEty c where c.custodian.reference = :ref and c.isPrincipal = true
2007-09-17 09:28:10,531 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: CustodianAccount.findMainAccountsByCustodianRef => select c from CustodianAccountEty c where c.custodian.reference IN (:refs) and c.isPrincipal = true
2007-09-17 09:28:10,531 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Counterpart.findByRef => select c from CounterpartEty c where c.portfolioRef.reference = :cliDos
2007-09-17 09:28:10,531 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Beneficiary.findByClidosAndRubric => select b from BeneficiaryEty b where b.owner.portfolioRef.reference = :owner_reference and b.owner.portfolioRef.legalEntityRef = :owner_legalEntityRef and b.portfolio.portfolioRef.reference = :benef_reference and b.portfolio.portfolioRef.legalEntityRef = :benef_legalEntityRef and b.beneficiaryType = :type
2007-09-17 09:28:10,531 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Cost.findMvtCost => select c from MovementCostEty c where c.securityMvt = :secuMvt and c.calcCcy = :calcCcy
2007-09-17 09:28:10,531 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Cost.findPositionCostLOC90 => select c from PositionCostLOC90Ety c where c.securityPosition = :secuPos and c.viewType = :viewType and c.calcCcy = :calcCcy
2007-09-17 09:28:10,531 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Cost.findPositionCosts => select c from com.lodh.position.cost.entity.AbstractPositionCostEty c where c.securityPosition = :secuPos and c.viewType = :viewType and c.calcCcy = :calcCcy
2007-09-17 09:28:10,531 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Cost.findPositionCostWAC => select c from PositionCostWACEty c where c.securityPosition = :secuPos and c.viewType = :viewType and c.calcCcy = :calcCcy
2007-09-17 09:28:10,531 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Interest.findInterestConditionByRef => select c from InterestConditionEty c where c.reference = :ref
2007-09-17 09:28:10,531 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Interest.findInterestConditionsByRefs => select c from InterestConditionEty c where c.reference IN (:refs)
2007-09-17 09:28:10,531 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Interest.findAccTypeIntTypeIntCond => select atitic from AccTypeIntTypeIntCondEty atitic where atitic.interestType = :interestType and atitic.accountType = :accountType and atitic.interestConditionDefinition = :icDef
2007-09-17 09:28:10,531 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Interest.findInterestConditionDefinition => select icd from InterestConditionDefinitionEty icd where icd.interestCondition.reference = :reference and (icd.limit = :limitAmount or (icd.limit is null and :limitAmount is null)) and (icd.startDate = :startDate or (icd.startDate is null and :startDate is null)) and (icd.limitCurrencyRef = :limitCurrency or (icd.limitCurrencyRef is null and :limitCurrency is null)) and (icd.limitType = :limitType or (icd.limitType is null and :limitType is null)) and icd.debitCreditType = :debitCredit
2007-09-17 09:28:10,531 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding Named query: Interest.findCashPositionInterestCondition => select cpic from CashPositionInterestConditionEty cpic where cpic.cashPosition.positionIdInSourceSystem = :posIdInSrcSystem and cpic.interestConditionDefinition = :icd
2007-09-17 09:28:10,531 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding named native query: CashPosition.findForUpdate => select * from TBL_Position where Id_Portfolio = :portfolio and Id_Instrument = :instrumentId and Cd_Position_State = :state and (ID_COMPOSITE_PARTICIP_ROLE = :cprId or (ID_COMPOSITE_PARTICIP_ROLE is null and :cprId=-1)) for update
2007-09-17 09:28:10,531 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding named native query: CashPosition.findByIdInSrcSystemForUpdate => select * from TBL_Position where Id_In_Source_System = :id for update
2007-09-17 09:28:10,531 [INFO ] org.hibernate.cfg.annotations.QueryBinder - Binding named native query: Position.findByIdForUpdate => select p.* from TBL_POSITION p where p.ID_POSITION=:position for update
2007-09-17 09:28:10,562 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.entity.UserEty
2007-09-17 09:28:10,609 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.entity.UserEty on table Tbl_User
2007-09-17 09:28:10,687 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.entity.PositionEty
2007-09-17 09:28:10,687 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.entity.PositionEty on table Tbl_Position
2007-09-17 09:28:10,828 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.entity.CashPositionEty
2007-09-17 09:28:10,859 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.entity.SecurityPositionEty
2007-09-17 09:28:10,859 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.entity.OperationEty
2007-09-17 09:28:10,859 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.entity.OperationEty on table Tbl_Operation
2007-09-17 09:28:10,968 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.entity.OrderEty
2007-09-17 09:28:10,968 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.entity.CashOrderVersionEty
2007-09-17 09:28:10,968 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.entity.CashOrderVersionEty on table Tbl_Cash_Order_Version
2007-09-17 09:28:11,000 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.entity.CashInternalOrderVersionEty
2007-09-17 09:28:11,000 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.entity.CashInternalOrderVersionEty on table Tbl_Int_Cash_Order_Version
2007-09-17 09:28:11,015 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.entity.StockOrderVersionEty
2007-09-17 09:28:11,015 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.entity.StockOrderVersionEty on table Tbl_Stock_Order_Version
2007-09-17 09:28:11,046 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.entity.ForexOrderVersionEty
2007-09-17 09:28:11,046 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.entity.ForexOrderVersionEty on table Tbl_Forex_Order_Version
2007-09-17 09:28:11,062 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.entity.TransactionEty
2007-09-17 09:28:11,062 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.entity.TransactionEty on table Tbl_Transaction
2007-09-17 09:28:11,093 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.entity.AmountTypeEty
2007-09-17 09:28:11,093 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.entity.AmountTypeEty on table Tbl_Amount_Type
2007-09-17 09:28:11,093 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.entity.SecurityMovementEty
2007-09-17 09:28:11,093 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.entity.SecurityMovementEty on table Tbl_Security_Movement
2007-09-17 09:28:11,203 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.entity.CashMovementEty
2007-09-17 09:28:11,203 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.entity.CashMovementEty on table Tbl_Cash_Movement
2007-09-17 09:28:11,218 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.entity.CurrencyEty
2007-09-17 09:28:11,218 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.entity.CurrencyEty on table Tbl_Currency
2007-09-17 09:28:11,218 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.entity.AbstractCompositeParticipationRoleEty
2007-09-17 09:28:11,218 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.entity.AbstractCompositeParticipationRoleEty on table Tbl_Composite_Particip_Role
2007-09-17 09:28:11,250 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.entity.ForwardForexParticipationRoleEty
2007-09-17 09:28:11,250 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.entity.InterestRateSwapParticipationRoleEty
2007-09-17 09:28:11,250 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.entity.SecurityPositionCustodianEty
2007-09-17 09:28:11,250 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.entity.SecurityPositionCustodianEty on table Tbl_Security_Pos_Custodian
2007-09-17 09:28:11,250 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.entity.AccountingContextEty
2007-09-17 09:28:11,250 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.entity.AccountingContextEty on table Tbl_Accounting_Context
2007-09-17 09:28:11,265 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.entity.StockOrderExecutionEty
2007-09-17 09:28:11,265 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.entity.StockOrderExecutionEty on table Tbl_Stock_Order_Execution
2007-09-17 09:28:11,265 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.entity.FixedLoanDepositOrderVersionEty
2007-09-17 09:28:11,265 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.entity.FixedLoanDepositOrderVersionEty on table Tbl_Fixed_Loan_Deposit_OV
2007-09-17 09:28:11,296 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.entity.OnCallLoanDepositOrderVersionEty
2007-09-17 09:28:11,296 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.entity.OnCallLoanDepositOrderVersionEty on table Tbl_On_Call_Loan_Deposit_OV
2007-09-17 09:28:11,296 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.cost.entity.MovementCostEty
2007-09-17 09:28:11,296 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.cost.entity.MovementCostEty on table Tbl_Movement_Cost_Value
2007-09-17 09:28:11,343 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.cost.entity.AbstractPositionCostEty
2007-09-17 09:28:11,343 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.cost.entity.AbstractPositionCostEty on table Tbl_Position_Cost_Value
2007-09-17 09:28:11,359 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.cost.entity.PositionCostLOC90Ety
2007-09-17 09:28:11,359 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.cost.entity.PositionCostWACEty
2007-09-17 09:28:11,359 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.portfolio.entity.PortfolioEty
2007-09-17 09:28:11,359 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.portfolio.entity.PortfolioEty on table Tbl_Portfolio
2007-09-17 09:28:11,375 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.portfolio.entity.PortfolioInterestTypeEty
2007-09-17 09:28:11,375 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.portfolio.entity.PortfolioInterestTypeEty on table Tbl_Portfolio_Interest_Type
2007-09-17 09:28:11,390 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.portfolio.entity.BeneficiaryEty
2007-09-17 09:28:11,390 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.portfolio.entity.BeneficiaryEty on table Tbl_Beneficiary
2007-09-17 09:28:11,390 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.portfolio.entity.CashBeneficiaryEty
2007-09-17 09:28:11,390 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.portfolio.entity.IncomeBeneficiaryEty
2007-09-17 09:28:11,390 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.custodian.entity.CustodianEty
2007-09-17 09:28:11,390 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.custodian.entity.CustodianEty on table Tbl_Custodian
2007-09-17 09:28:11,390 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.custodian.entity.CustodianAccountEty
2007-09-17 09:28:11,390 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.custodian.entity.CustodianAccountEty on table Tbl_Custodian_Account
2007-09-17 09:28:11,406 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.custodian.entity.ClientPortfolioCustodianAccountEty
2007-09-17 09:28:11,406 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.instrument.entity.InstrumentEty
2007-09-17 09:28:11,406 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.instrument.entity.InstrumentEty on table Tbl_Instrument
2007-09-17 09:28:11,437 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.instrument.entity.CashInstrumentEty
2007-09-17 09:28:11,437 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.instrument.entity.CashInstrumentEty on table Tbl_Cash_Instrument
2007-09-17 09:28:11,437 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.instrument.entity.SecurityInstrumentEty
2007-09-17 09:28:11,437 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.instrument.entity.SecurityInstrumentEty on table Tbl_Security_Instrument
2007-09-17 09:28:11,437 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.instrument.entity.PrepaidFundInstrumentEty
2007-09-17 09:28:11,437 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.instrument.entity.PrepaidFundInstrumentEty on table Tbl_Prepaid_Fund_Instr
2007-09-17 09:28:11,437 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.instrument.entity.ForwardCashInstrumentEty
2007-09-17 09:28:11,437 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.instrument.entity.ForwardCashInstrumentEty on table Tbl_Fwd_Cash_Instr
2007-09-17 09:28:11,453 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.instrument.entity.ForwardSecurityInstrumentEty
2007-09-17 09:28:11,453 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.instrument.entity.ForwardSecurityInstrumentEty on table Tbl_Fwd_Security_Instr
2007-09-17 09:28:11,453 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.instrument.entity.ForwardCounterValueCashInstrumentEty
2007-09-17 09:28:11,453 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.instrument.entity.ForwardCounterValueCashInstrumentEty on table Tbl_Fwd_CounterVal_Instr
2007-09-17 09:28:11,453 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.instrument.entity.FixedLoanDepositInstrumentEty
2007-09-17 09:28:11,453 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.instrument.entity.FixedLoanDepositInstrumentEty on table Tbl_Fixed_Loan_Deposit
2007-09-17 09:28:11,453 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.instrument.entity.OnCallLoanDepositInstrumentEty
2007-09-17 09:28:11,453 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.instrument.entity.OnCallLoanDepositInstrumentEty on table Tbl_On_Call_Loan_Deposit
2007-09-17 09:28:11,453 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.instrument.entity.DurationDefinitionEty
2007-09-17 09:28:11,453 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.instrument.entity.DurationDefinitionEty on table Tbl_Duration_Def
2007-09-17 09:28:11,468 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.instrument.entity.CallDelayDefinitionEty
2007-09-17 09:28:11,468 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.instrument.entity.CallDelayDefinitionEty on table Tbl_Call_Delay_Def
2007-09-17 09:28:11,468 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.instrument.entity.CompositeEty
2007-09-17 09:28:11,468 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.instrument.entity.CompositeEty on table Tbl_Composite
2007-09-17 09:28:11,468 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.instrument.entity.ForwardForexInstrumentEty
2007-09-17 09:28:11,468 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.instrument.entity.ForwardForexInstrumentEty on table Tbl_Fwd_Forex_Composite
2007-09-17 09:28:11,468 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.instrument.entity.CounterpartEty
2007-09-17 09:28:11,468 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.instrument.entity.CounterpartEty on table Tbl_Counterpart
2007-09-17 09:28:11,484 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.instrument.entity.InterestRateSwapInstrumentEty
2007-09-17 09:28:11,484 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.instrument.entity.InterestRateSwapInstrumentEty on table Tbl_Interest_Swap_Composite
2007-09-17 09:28:11,484 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.interest.entity.InterestConditionEty
2007-09-17 09:28:11,484 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.interest.entity.InterestConditionEty on table Tbl_Interest_Condition
2007-09-17 09:28:11,484 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.interest.entity.InterestConditionDefinitionEty
2007-09-17 09:28:11,484 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.interest.entity.InterestConditionDefinitionEty on table Tbl_Interest_Condition_Def
2007-09-17 09:28:11,515 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.interest.entity.InterestRateHistoEty
2007-09-17 09:28:11,515 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.interest.entity.InterestRateHistoEty on table Tbl_Int_Cond_Ccy_Rate
2007-09-17 09:28:11,515 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.interest.entity.CounterpartInterestConditionEty
2007-09-17 09:28:11,515 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.interest.entity.CounterpartInterestConditionEty on table Tbl_Counterpart_Int_Cond
2007-09-17 09:28:11,515 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.interest.entity.InstrumentInterestConditionEty
2007-09-17 09:28:11,515 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.interest.entity.InstrumentInterestConditionEty on table Tbl_Instrument_Int_Cond
2007-09-17 09:28:11,531 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.interest.entity.CashPositionInterestConditionEty
2007-09-17 09:28:11,531 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.interest.entity.CashPositionInterestConditionEty on table Tbl_Cash_Pos_Int_Cond
2007-09-17 09:28:11,531 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.interest.entity.CashPositionInterestHistoEty
2007-09-17 09:28:11,531 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.interest.entity.CashPositionInterestHistoEty on table Tbl_Cash_Pos_Int_Histo
2007-09-17 09:28:11,531 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.interest.entity.InterestUsanceEty
2007-09-17 09:28:11,531 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.interest.entity.InterestUsanceEty on table Tbl_Interest_Usance
2007-09-17 09:28:11,546 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.interest.entity.CashPositionInterestUsanceEty
2007-09-17 09:28:11,546 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.interest.entity.CashPositionInterestUsanceEty on table Tbl_Cash_Pos_Int_Usance
2007-09-17 09:28:11,546 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.interest.entity.InstrumentInterestUsanceEty
2007-09-17 09:28:11,546 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.interest.entity.InstrumentInterestUsanceEty on table Tbl_Instrument_Int_Usance
2007-09-17 09:28:11,546 [INFO ] org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.lodh.position.interest.entity.AccTypeIntTypeIntCondEty
2007-09-17 09:28:11,546 [INFO ] org.hibernate.cfg.annotations.EntityBinder - Bind entity com.lodh.position.interest.entity.AccTypeIntTypeIntCondEty on table Tbl_Acc_Int_Type_Int_Cond
2007-09-17 09:28:11,578 [INFO ] org.hibernate.cfg.annotations.CollectionBinder - Mapping collection: com.lodh.position.entity.OperationEty.transactions -> Tbl_Transaction
2007-09-17 09:28:11,593 [INFO ] org.hibernate.cfg.annotations.CollectionBinder - Mapping collection: com.lodh.position.entity.StockOrderVersionEty.stockOrderExecutions -> Tbl_Stock_Order_Execution
2007-09-17 09:28:11,593 [INFO ] org.hibernate.cfg.annotations.CollectionBinder - Mapping collection: com.lodh.position.portfolio.entity.PortfolioEty.beneficiaries -> Tbl_Beneficiary
2007-09-17 09:28:11,593 [INFO ] org.hibernate.cfg.annotations.CollectionBinder - Mapping collection: com.lodh.position.custodian.entity.CustodianEty.accounts -> Tbl_Custodian_Account
2007-09-17 09:28:11,609 [INFO ] org.hibernate.validator.Version - Hibernate Validator 3.0.0.GA
2007-09-17 09:28:12,171 [INFO ] org.hibernate.connection.DriverManagerConnectionProvider - Using Hibernate built-in connection pool (not for production use!)
2007-09-17 09:28:12,171 [INFO ] org.hibernate.connection.DriverManagerConnectionProvider - Hibernate connection pool size: 20
2007-09-17 09:28:12,171 [INFO ] org.hibernate.connection.DriverManagerConnectionProvider - autocommit mode: true
2007-09-17 09:28:12,187 [INFO ] org.hibernate.connection.DriverManagerConnectionProvider - using driver: org.hsqldb.jdbcDriver at URL: jdbc:hsqldb:mem:test_db;sql.enforce_strict_size=true
2007-09-17 09:28:12,187 [INFO ] org.hibernate.connection.DriverManagerConnectionProvider - connection properties: {user=sa, password=****, autocommit=true, release_mode=auto}
2007-09-17 09:28:12,500 [INFO ] org.hibernate.cfg.SettingsFactory - RDBMS: HSQL Database Engine, version: 1.8.0
2007-09-17 09:28:12,500 [INFO ] org.hibernate.cfg.SettingsFactory - JDBC driver: HSQL Database Engine Driver, version: 1.8.0
2007-09-17 09:28:12,531 [INFO ] org.hibernate.dialect.Dialect - Using dialect: org.hibernate.dialect.HSQLDialect
2007-09-17 09:28:12,531 [INFO ] org.hibernate.transaction.TransactionFactoryFactory - Transaction strategy: org.hibernate.transaction.JDBCTransactionFactory
2007-09-17 09:28:12,531 [INFO ] org.hibernate.transaction.TransactionManagerLookupFactory - No TransactionManagerLookup configured (in JTA environment, use of read-write or transactional second-level cache is not recommended)
2007-09-17 09:28:12,531 [INFO ] org.hibernate.cfg.SettingsFactory - Automatic flush during beforeCompletion(): disabled
2007-09-17 09:28:12,531 [INFO ] org.hibernate.cfg.SettingsFactory - Automatic session close at end of transaction: disabled
2007-09-17 09:28:12,546 [INFO ] org.hibernate.cfg.SettingsFactory - Scrollable result sets: enabled
2007-09-17 09:28:12,546 [INFO ] org.hibernate.cfg.SettingsFactory - JDBC3 getGeneratedKeys(): disabled
2007-09-17 09:28:12,546 [INFO ] org.hibernate.cfg.SettingsFactory - Connection release mode: auto
2007-09-17 09:28:12,546 [INFO ] org.hibernate.cfg.SettingsFactory - Maximum outer join fetch depth: 3
2007-09-17 09:28:12,546 [INFO ] org.hibernate.cfg.SettingsFactory - Default batch fetch size: 1
2007-09-17 09:28:12,546 [INFO ] org.hibernate.cfg.SettingsFactory - Generate SQL with comments: disabled
2007-09-17 09:28:12,546 [INFO ] org.hibernate.cfg.SettingsFactory - Order SQL updates by primary key: disabled
2007-09-17 09:28:12,546 [INFO ] org.hibernate.cfg.SettingsFactory - Query translator: org.hibernate.hql.ast.ASTQueryTranslatorFactory
2007-09-17 09:28:12,546 [INFO ] org.hibernate.hql.ast.ASTQueryTranslatorFactory - Using ASTQueryTranslatorFactory
2007-09-17 09:28:12,546 [INFO ] org.hibernate.cfg.SettingsFactory - Query language substitutions: {}
2007-09-17 09:28:12,546 [INFO ] org.hibernate.cfg.SettingsFactory - JPA-QL strict compliance: enabled
2007-09-17 09:28:12,546 [INFO ] org.hibernate.cfg.SettingsFactory - Second-level cache: enabled
2007-09-17 09:28:12,546 [INFO ] org.hibernate.cfg.SettingsFactory - Query cache: enabled
2007-09-17 09:28:12,546 [INFO ] org.hibernate.cfg.SettingsFactory - Cache provider: org.hibernate.cache.TreeCacheProvider
2007-09-17 09:28:12,546 [INFO ] org.hibernate.cfg.SettingsFactory - Optimize cache for minimal puts: enabled
2007-09-17 09:28:12,546 [INFO ] org.hibernate.cfg.SettingsFactory - Cache region prefix: Position
2007-09-17 09:28:12,546 [INFO ] org.hibernate.cfg.SettingsFactory - Structured second-level cache entries: enabled
2007-09-17 09:28:12,546 [INFO ] org.hibernate.cfg.SettingsFactory - Query cache factory: org.hibernate.cache.StandardQueryCacheFactory
2007-09-17 09:28:12,562 [INFO ] org.hibernate.cfg.SettingsFactory - Statistics: disabled
2007-09-17 09:28:12,562 [INFO ] org.hibernate.cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2007-09-17 09:28:12,562 [INFO ] org.hibernate.cfg.SettingsFactory - Default entity-mode: pojo
2007-09-17 09:28:12,562 [INFO ] org.hibernate.cfg.SettingsFactory - Named query checking : enabled
2007-09-17 09:28:12,718 [INFO ] org.hibernate.impl.SessionFactoryImpl - building session factory
2007-09-17 09:28:12,859 [INFO ] org.jboss.cache.PropertyConfigurator - Found existing property editor for org.w3c.dom.Element: org.jboss.util.propertyeditor.ElementEditor@1057305
2007-09-17 09:28:12,875 [INFO ] org.jboss.cache.PropertyConfigurator - attribute size: 1
2007-09-17 09:28:12,906 [INFO ] org.hibernate.transaction.TransactionManagerLookupFactory - No TransactionManagerLookup configured (in JTA environment, use of read-write or transactional second-level cache is not recommended)
2007-09-17 09:28:13,125 [INFO ] org.jboss.cache.factories.InterceptorChainFactory - interceptor chain is:
class org.jboss.cache.interceptors.CallInterceptor
class org.jboss.cache.interceptors.PessimisticLockInterceptor
class org.jboss.cache.interceptors.UnlockInterceptor
class org.jboss.cache.interceptors.TxInterceptor
class org.jboss.cache.interceptors.CacheMgmtInterceptor
2007-09-17 09:28:14,625 [INFO ] org.hibernate.impl.SessionFactoryObjectFactory - Not binding factory to JNDI, no JNDI name configured
2007-09-17 09:28:14,812 [INFO ] org.hibernate.tool.hbm2ddl.SchemaExport - Running hbm2ddl schema export
2007-09-17 09:28:14,812 [INFO ] org.hibernate.tool.hbm2ddl.SchemaExport - exporting generated schema to database
2007-09-17 09:28:14,906 [INFO ] org.hibernate.tool.hbm2ddl.SchemaExport - schema export complete
2007-09-17 09:28:15,093 [INFO ] org.hibernate.cache.UpdateTimestampsCache - starting update timestamps cache at region: Position.org.hibernate.cache.UpdateTimestampsCache
2007-09-17 09:28:15,093 [INFO ] org.hibernate.cache.StandardQueryCache - starting query cache at region: Position.org.hibernate.cache.StandardQueryCache
2007-09-17 09:28:16,390 [DEBUG] com.lodh.util.jpa.CallContext - factory initialized: org.hibernate.ejb.EntityManagerFactoryImpl@166ff9c
2007-09-17 09:28:16,578 [DEBUG] com.lodh.position.custodian.entity.CustodianTest - [CustodianAccountEty#1, CustodianAccountEty#1]
